!function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):e()}(0,function(){var t=document,e=window;if("object"==typeof e.Keyboard)return e.Keyboard;var i=navigator.userAgent,a="windows";/Mac\sOS\sX/i.test(i)&&(a="mac");var n="chrome";"undefined"!=typeof t.mozFullScreen?n="moz":"undefined"==typeof t.msHidden&&"undefined"!=typeof t.hidden||(n="ie");var r={windows:"moz"==n?{ctrlKey:!1,altKey:!0,shiftKey:!0}:{ctrlKey:!1,altKey:!0,shiftKey:!1},mac:{ctrlKey:!0,altKey:!0,shiftKey:!1}}[a],o=function(t,e){if(!t)return"";e=e||"x";var i,a="",n=0;for(n;n<t.length;n+=1)t.charCodeAt(n)>=55296&&t.charCodeAt(n)<=56319?(i=(65536+1024*(Number(t.charCodeAt(n))-55296)+Number(t.charCodeAt(n+1))-56320).toString(16),n+=1):i=t.charCodeAt(n).toString(16),a+=e+i;return a.substr(e.length)},s=null,l=function(e){if(!t.hasTipsShow){var i=t.documentElement.scrollTop||t.body.scrollTop,a=t.documentElement.scrollLeft||t.body.scrollLeft;e.forEach(function(e){if(e.clientHeight*e.clientWidth!=0){var n=e.getAttribute("accesskey"),o=[];for(var s in r)r[s]&&o.push(s);o.push(n);var l=e.getBoundingClientRect(),c=t.createElement("div");c.className="ui-kbd-tips AK_Tips",c.setAttribute("style","top:"+(l.top+i)+"px;left:"+(l.left+a)+"px;"),c.innerHTML=o.map(function(t){return"<kbd>"+t.replace("Key","")+"</kbd>"}).join("+"),t.body.appendChild(c),c.fromTarget=e}}),t.hasTipsShow=!0,s=setTimeout(function(){c()},3e3)}},c=function(){clearTimeout(s);var e=t.querySelectorAll(".AK_Tips");[].slice.call(e).forEach(function(e){e.fromTarget&&(e.fromTarget.hasTipsShow=null),t.body.removeChild(e)}),t.hasTipsShow=null};if(t.addEventListener&&(t.addEventListener("keydown",function(e){var i=!1,a=e.target||t.activeElement,s=a.tagName.toLowerCase();("textarea"==s||"input"==s&&0==/checkbox|radio|select|file|button|image|hidden/i.test(a.type))&&(i=!0);var d=t.querySelectorAll("a[accesskey],area[accesskey],button[accesskey],input[accesskey],label[accesskey],legend[accesskey],textarea[accesskey]");if(0!=d.length){var h=[].slice.call(d),u=-1;if(h.map(function(t){return t.getAttribute("accesskey")}).forEach(function(t,i){if(e.key&&e.key==t||e.keyIdentifier&&parseInt(e.keyIdentifier.toLowerCase().replace("u+",""),16)==parseInt(o(t),16))return u=i,!1}),0==e.altKey&&0==e.shiftKey&&0==e.ctrlKey){if(i)return;h[u]&&(h[u].focus(),e.preventDefault())}else 0==e.altKey&&1==e.shiftKey&&0==e.ctrlKey?191!=e.keyCode||i||(t.hasTipsShow?c():l(h)):e.altKey==r.altKey&&e.shiftKey==r.shiftKey&&e.ctrlKey==r.ctrlKey&&(-1==u?(e.preventDefault(),t.hasTipsShow?c():l(h)):c(),"ie"==n&&h[u]&&!i&&h[u].click())}}),t.addEventListener("mousedown",function(){c()})),t.addEventListener){var d={37:"left",38:"up",39:"right",40:"down",13:"enter",9:"tab",27:"esc"},h={add:function(t){t.className=t.className+" ui-outline"},remove:function(t){t.className=t.className.split(/\s+/).filter(function(t){if("ui-outline"!=t)return t}).join(" ")},removeAll:function(){[].slice.call(t.querySelectorAll(".ui-outline")).forEach(function(t){h.remove(t)})},has:function(t){return!(!t.className||!t.className.split)&&t.className.split(/\s+/).filter(function(t){if("ui-outline"==t)return t}).length>0}};e.isKeyEvent=!1,t.addEventListener("keydown",function(i){e.isKeyEvent=!0,setTimeout(function(){e.isKeyEvent=!1},100);var a=d[i.keyCode];if(a){var n=t.activeElement;if(n&&!/body/i.test(n.tagName)){if(/^radio|checkbox$/i.test(n.type)&&"enter"==a)return n.click(),void i.preventDefault();var r=null,o=t.querySelectorAll(".ESC");"esc"==a&&o.length&&[].slice.call(o).forEach(function(e){var i=e.id;(r=i&&t.querySelector('a[data-target="'+i+'"],input[data-target="'+i+'"]'))&&"none"!==e.style.display&&e.clientHeight>0&&r.click()});var s=n.getAttribute("data-focus"),l=n.getAttribute("data-target"),c=null;if((s||l)&&(s?c=t.getElementById(s):l&&(c=t.getElementById(l)),c&&(0!=c.clientWidth||0!=c.clientHeight)))if("tab"!=a){if("enter"==a){var u=c.querySelector(".ui-outline");if(u&&s)return i.preventDefault(),void u.click();if(l)return}if("esc"==a)return r=t.querySelector('a[data-target="'+l+'"],input[data-target="'+l+'"]'),void(s?n.blur():r&&0==/ESC/.test(r.className)&&r.click());var p=[].slice.call(c.querySelectorAll("a[href], button:not(:disabled), input:not(:disabled)")),f=-1;0!=p.length&&(p.forEach(function(t,e){s?h.has(t)&&(f=e):n==t&&(f=e),h.remove(t)}),i.preventDefault(),"left"==a||"up"==a?--f<0&&(f=-1):"right"!=a&&"down"!=a||++f>p.length-1&&(f=p.length),p[f]&&(s?h.add(p[f]):p[f].focus()))}else{h.removeAll();var v=c.querySelector("a[href], button:not(:disabled), input:not(:disabled)");v&&(v.focus(),i.preventDefault())}}}}),t.addEventListener("mousedown",function(t){var e=t.target;e&&!h.has(e)&&h.removeAll()}),t.addEventListener("click",function(i){var a=i.target,n=t.activeElement,r=a.getAttribute("tabindex")||"-1";a&&a==n&&(/^radio|checkbox$/i.test(n.type)||r>=0)&&0==e.isKeyEvent&&n.blur()}),t.addEventListener("focusin",function(t){var i=t.target;i&&(/^javascript/.test(i.href)&&!i.getAttribute("role")?i.setAttribute("role","button"):"button"!=i.type&&"submit"!=i.type||e.isKeyEvent&&h.add(i))}),t.addEventListener("focusout",function(t){var e=t.target;e&&("button"!=e.type&&"submit"!=e.type||h.remove(e))})}e.Keyboard={ua:i,browser:n,keycode:d,keyPrefix:r}}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Follow=e()}(this,function(require){"function"==typeof require&&require("common/ui/Enhance"),$.fn.follow=function(t,e){var i={offsets:{x:0,y:0},position:"4-1",edgeAdjust:!0},a=$.extend({},i,e||{});return $(this).each(function(){var e=$(this);if(0!=t.length){var n,r,o,s,l,c=0,d=0,h=e.data("height"),u=e.data("width");h||(h=e.outerHeight()),u||(u=e.outerWidth());var p=$(window).scrollTop(),f=$(window).scrollLeft(),v=parseInt(a.offsets.x,10)||0,g=parseInt(a.offsets.y,10)||0,m=$(window).width(),y=$(window).height(),b=a.position;if("string"!=typeof b&&2==b.length){var w=b[0]+v,x=b[1]+g;return 1==a.edgeAdjust&&(w+u>m+f-5&&(w=m+f-5-u),x+h>y+p-5&&(x=y+p-5-h)),e.css({position:"absolute",left:w,top:x}).attr("data-align","3-1"),void(e.zIndex&&e.zIndex())}n=t.offset(),c=t.outerHeight(),d=t.outerWidth(),r=n.left,o=n.top;var k,j=["4-1","1-4","5-7","2-3","2-1","6-8","3-4","4-3","8-6","1-2","7-5","3-2"],C=a.position,T=!1;$.each(j,function(t,e){if(e===C)return T=!0,!1}),T||(C=i.position);var A=function(t){var e="bottom";switch(t){case"1-4":case"5-7":case"2-3":e="top";break;case"2-1":case"6-8":case"3-4":e="right";break;case"1-2":case"8-6":case"4-3":e="left";break;case"4-1":case"7-5":case"3-2":e="bottom"}return e},D=function(t){return"5-7"===t||"6-8"===t||"8-6"===t||"7-5"===t},S=function(t){if("right"===t){if(r+d+u+v>$(window).width())return!1}else if("bottom"===t){if(o+c+h+g>p+$(window).height())return!1}else if("top"===t){if(h+g>o-p)return!1}else if("left"===t&&u+v>r)return!1;return!0};k=A(C),a.edgeAdjust&&(S(k)?function(){if(!D(C)){var t,e={top:{right:"2-3",left:"1-4"},right:{top:"2-1",bottom:"3-4"},bottom:{right:"3-2",left:"4-1"},left:{top:"1-2",bottom:"4-3"}}[k];if(e)for(t in e)S(t)||(C=e[t])}}():function(){if(D(C))C={"5-7":"7-5","7-5":"5-7","6-8":"8-6","8-6":"6-8"}[C];else{var t={top:{left:"3-2",right:"4-1"},right:{bottom:"1-2",top:"4-3"},bottom:{left:"2-3",right:"1-4"},left:{bottom:"2-1",top:"3-4"}}[k],e=[];for(var i in t)e.push(i);C=S(e[0])||!S(e[1])?t[e[0]]:t[e[1]]}}());var M=A(C),L=C.split("-")[0];switch(M){case"top":l=o-h,s="1"==L?r:"5"===L?r-(u-d)/2:r-(u-d);break;case"right":s=r+d,l="2"==L?o:"6"===L?o-(h-c)/2:o-(h-c);break;case"bottom":l=o+c,s="4"==L?r:"7"===L?r-(u-d)/2:r-(u-d);break;case"left":s=r-u,l="2"==L?o:"6"===L?o-(u-d)/2:o-(h-c)}a.edgeAdjust&&D(C)&&("7-5"==C||"5-7"==C?s-f<.5*m?s-f<0&&(s=f):s-f+u>m&&(s=m+f-u):l-p<.5*y?l-p<0&&(l=p):l-p+h>y&&(l=y+p-h)),"top"==M||"left"==M?(s-=v,l-=g):(s+=v,l+=g),e.css({position:"absolute",left:Math.round(s),top:Math.round(l)}).attr("data-align",C),e.zIndex&&e.zIndex()}})};return function(t,e,i){e.follow(t,i)}}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Refresh=e()}(this,function(require){return"function"==typeof require?require("common/ui/Keyboard"):!window.Keyboard&&window.console&&window.console.warn("you may forget include Keyboard.js"),$.fn.zIndex=function(){return $(this).each(function(){var t=this,e=$(this).css("z-index"),i=19;$("body").children().each(function(){var e=this,a=$(e),n=1*a.css("zIndex");n&&e!==t&&"none"!==a.css("display")&&a.width()*a.height()>0&&(i=Math.max(n+1,i))}),e!=i&&$(this).css("z-index",i)})},$.fn.refresh=function(){return $(this).each(function(){var t=$(this);t.is("select")&&t.selectMatch?t.selectMatch():/^radio|checkbox$/i.test(t.attr("type"))&&t.propMatch?t.propMatch():t.attr("placeholder")&&t.placeholder?t.placeholder():t.data("pagination")&&t.data("pagination").show()})},$.fn.disabled=function(){return $(this).each(function(){var t=$(this);if(t.is(":input"))t.attr("disabled","disabled");else if(t.is("a"))t.data("href",t.attr("href")),t.removeAttr("href"),t.attr("aria-disabled","true");else{var e=t.attr("tabindex");e&&(t.data("tabindex",e),t.removeAttr("tabindex"))}t.addClass("disabled")})},$.fn.enabled=function(){return $(this).each(function(){var t=$(this);if(t.is(":input"))t.removeAttr("disabled");else if(t.is("a"))t.attr("href",t.data("href")||"javascript:"),t.attr("aria-disabled","false");else{var e=t.data("tabindex");e&&t.attr("tabindex",e)}t.removeClass("disabled")})},$.fn.isDisabled=function(){var t=$(this).eq(0);return t.is(":input")?t.prop("disabled"):t.hasClass("disabled")},function(t){t.refresh()}}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Tab=e()}(this,function(){var t="checked";$.fn.eqAttr=function(t){t=t||"data-rel";var e=$(this).attr(t);if(!e)return $();var i=$("#"+e);return i.length?i:$("."+e)},$.fn.tab=function(t){$(this).data("tab")||$(this).data("tab",new e($(this),t))},$.queryString=function(t,e,i){var a=(i||location.href).split("#")[0],n="",r=location.hash,o=a.split("?"),s=[];return o.length>1?(""!=o[1]&&(s=$.grep(o[1].split("&"),function(e){return e.split("=")[0]!=t})),n=(n=o[0]+"?"+s.join("&")+"&").replace("?&","?")):n=a+"?",n+t+"="+e+r};var e=function(e,i){if(0!=(e=$(e)).length){i=i||{};var a={eventType:"click",index:"auto",history:!0,callback:$.noop},n=$.extend({},a,i),r=n.index;e.each(function(e){"number"!=typeof r&&$(this).hasClass(t)&&(r=e),$(this).data("index",e).attr({role:"tab","aria-selected":"false"}),$(this).eqAttr().attr("role","tabpanel")}),"number"!=typeof r&&(r=0),e.on(n.eventType,function(i){if($(this).hasClass(t))i.isTrigger&&n.callback.call(this,this,$(),$(),$());else{var a=$(this).addClass(t),o=e.eq(r).removeClass(t),s=a.eqAttr().addClass(t),l=o.eqAttr().removeClass(t);if(r=a.data("index"),n.callback.call(this,a,o,s,l),/^(:?javas|#)/.test(this.getAttribute("href"))){var c=a.attr("data-rel");n.history&&history.replaceState?history.replaceState(null,document.title,$.queryString("targetTab",c)):n.history&&(location.hash="#targetTab="+c),i.preventDefault()}}}),$(function(){e.eq(r).attr({"aria-selected":"true"}).trigger(n.eventType)}),this.el={tab:e},this.params=n,e.length>1&&e[0].parentNode==e[1].parentNode&&e.parent().attr("role","tablist")}};return e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Drop=e()}(this,function(require){if("function"==typeof require)require("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};$.fn.drop=function(e,i){return $(this).each(function(){$(this).data("drop")||$(this).data("drop",new t($(this),e,i))})};var t=function(t,e,i){var a={eventType:"null",selector:"",offsets:{x:0,y:0},edgeAdjust:!0,position:"7-5",onShow:$.noop,onHide:$.noop},n=$.extend({},a,i||{}),r=e.attr("id");r||(r=("id_"+Math.random()).replace("0.",""),e.attr("id",r)),""==n.selector&&t.attr({"data-target":r,"aria-expanded":"false"}),this.el={trigger:t,target:e},this.offsets=n.offsets,this.callback={show:n.onShow,hide:n.onHide},this.position=n.position,this.edgeAdjust=n.edgeAdjust,this.display=!1;var o=this;switch(n.eventType){case"null":this.show();break;case"hover":var s,l;t.delegate(n.selector,"mouseenter",function(){n.selector&&(o.el.trigger=$(this).attr({"data-target":r,"aria-expanded":"false"})),s=setTimeout(function(){o.show()},150),clearTimeout(l)}),t.delegate(n.selector,"mouseleave",function(){clearTimeout(s),l=setTimeout(function(){o.hide()},200)}),e.data("dropHover")||(e.hover(function(){clearTimeout(l)},function(){l=setTimeout(function(){o.hide()},100)}),e.data("dropHover",!0)),t.delegate(n.selector,"click",function(t){window.isKeyEvent&&(n.selector&&(o.el.trigger=$(this).attr({"data-target":r,"aria-expanded":"false"})),0==o.display?o.show():o.hide(),t.preventDefault())});break;case"click":case"contextmenu":t.delegate(n.selector,n.eventType,function(t){if(t.preventDefault(),n.selector&&(o.el.trigger=$(this).attr({"data-target":r,"aria-expanded":"false"})),"contextmenu"==n.eventType)return o.position=[t.pageX,t.pageY],void o.show();0==o.display?o.show():o.hide()})}return $(document).click(function(t){var e=t&&t.target;if(e&&o&&1==o.display){var i=o.el.trigger.get(0),a=o.el.target.get(0);i&&a&&e!=i&&e!=a&&0==i.contains(e)&&0==a.contains(e)&&o.hide()}}),$(window).resize(function(){o.follow()}),o};return t.prototype.follow=function(){var t=this.el.target,e=this.el.trigger;return 1==this.display&&"none"!=e.css("display")&&t.follow(e,{offsets:this.offsets,position:this.position,edgeAdjust:this.edgeAdjust}),this},t.prototype.show=function(){var t=this.el.target,e=this.el.trigger;return t&&0==$.contains(document.body,t.get(0))&&$("body").append(t),this.display=!0,t.css({position:"absolute",display:"inline"}).addClass("ESC"),e.attr({"aria-expanded":"true"}),this.follow(),$.isFunction(this.callback.show)&&this.callback.show.call(this,e,t),this},t.prototype.hide=function(){var t=this.el.target,e=this.el.trigger;return t.hide().removeClass("ESC"),e.attr({"aria-expanded":"false"}),window.isKeyEvent&&e.focus(),this.display=!1,$.isFunction(this.callback.hide)&&this.callback.hide.call(this,e,t),this},t}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.DropList=e()}(this,function(require){if("function"==typeof require)require("common/ui/Drop");else if(!$().drop)return window.console&&window.console.error("need Drop.js"),{};$.fn.dropList=function(e,i){return $(this).each(function(){$(this).data("dropList")||$(this).data("dropList",new t($(this),e,i))})};var t=function(t,e,i){var a={eventType:"click",offsets:{x:0,y:0},position:"4-1",selector:"",width:"",onShow:$.noop,onHide:$.noop,onSelect:$.noop},n=$.extend({},a,i||{}),r=$("<div></div>").addClass("ui-droplist-x").css("width",n.width).attr({role:"listbox"});if(0!=t.length){var o=t.find(".ui-droplist-arrow"),s=o.length?o.get(0).outerHTML:"",l=$.trim(t.html().replace(s,""));if($.isArray(e)&&0==e.length)e=[{value:"没有数据",disabled:!0}];else if($.isArray(e)&&""==n.selector){var c=!1,d=-1;$.each(e,function(e,i){i.selected&&(t.html(i.value+s),c=!0),$.trim(i.value)==l&&(d=e)}),0==c&&-1!=d&&(e[d].selected=!0)}var h=function(t){var e="";return $.each(t,function(t,i){var a="";i.selected&&(a=" selected"),e=1!=i.disabled?e+'<a href="'+(i.href||"javascript:")+'" class="ui-droplist-li'+a+'" data-index="'+t+'" role="option" aria-selected="'+(i.selected||"false")+'" data-target="'+r.attr("id")+'">'+i.value+"</a>":e+'<span class="ui-droplist-li">'+i.value+"</span>"}),e};t.drop(r,{eventType:n.eventType,offsets:n.offsets,selector:n.selector,position:n.position,onShow:function(){var i=this.data;$.isFunction(e)&&(i=e(),u.data=i),r.html(h(i)),n.onShow.apply(this,[t,r])},onHide:n.onHide});var u=t.data("drop");return u.data=e,r.delegate("a","click",function(){var i=1*$(this).attr("data-index");if("contextmenu"==n.eventType)return n.onSelect.call(this,u.data[i],u),void u.hide();0==$(this).hasClass("selected")&&($.isArray(e)&&/^javas/.test($(this).attr("href"))&&($.each(e,function(t,e){e.selected&&(e.selected=null),t==i&&(e.selected=!0)}),u.data=e,t.html($(this).html()+s)),n.onSelect.call(this,u.data[i],u)),u.hide()}),u}};return t}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.DropPanel=e()}(this,function(require){if("function"==typeof require)var t=require("common/ui/Drop");else if(!$().drop)return window.console&&window.console.error("need Drop.js"),{};t=t||window.Drop;var e=window.addEventListener?'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M116.152,99.999l36.482-36.486c2.881-2.881,2.881-7.54,0-10.42 l-5.215-5.215c-2.871-2.881-7.539-2.881-10.42,0l-36.484,36.484L64.031,47.877c-2.881-2.881-7.549-2.881-10.43,0l-5.205,5.215 c-2.881,2.881-2.881,7.54,0,10.42l36.482,36.486l-36.482,36.482c-2.881,2.881-2.881,7.549,0,10.43l5.205,5.215 c2.881,2.871,7.549,2.871,10.43,0l36.484-36.488L137,152.126c2.881,2.871,7.549,2.871,10.42,0l5.215-5.215 c2.881-2.881,2.881-7.549,0-10.43L116.152,99.999z"/></svg>':"";$.fn.dropPanel=function(t){return $(this).each(function(){$(this).data("dropPanel")||$(this).data("dropPanel",new i($(this),t))})};var i=function(i,a){var n={title:"",content:"",buttons:[{},{}],width:"auto",eventType:"click",selector:"",offsets:{x:0,y:0},position:"4-1",onShow:$.noop,onHide:$.noop},r=$.extend({},n,a||{}),o=$("<div></div>").addClass("ui-dropanel-x");/\d/.test(r.width)&&o.width(r.width);var s={};s.title=$("<h5></h5>").addClass("ui-dropanel-title").html(r.title),s.close=$("<a></a>").attr({href:"javascript:;",role:"button","aria-label":"关闭"}).html(e).addClass("ui-dropanel-close"),s.content=$("<div></div>").addClass("ui-dropanel-content").html(r.content),s.footer=$("<div></div>").addClass("ui-dropanel-footer"),$.each(r.buttons,function(t,e){e=e||{};var i=t?e.type||"":e.type||"warning",a=t?e.value||"取消":e.value||"确定",n=e.events||{click:function(){l.hide()}};$.isFunction(n)&&(n={click:n});var r="ui-button";i&&(r=r+" "+r+"-"+i),e["for"]?s["button"+t]=$('<label for="'+e["for"]+'" class="'+r+'" role="button">'+a+"</label>"):s["button"+t]=$('<a href="javascript:" class="'+r+'" role="button">'+a+"</a>"),$.each(n,function(e,i){s["button"+t].bind(e,{drop:l},i)}),s.footer.append(s["button"+t])}),o.append(s.title).append(s.close).append(s.content).append(s.footer);var l=new t(i,o,{eventType:r.eventType,offsets:r.offsets,selector:r.selector,position:r.position,onShow:r.onShow,onHide:r.onHide});s.close.click(function(){l.hide()}),$.each(r.buttons,function(t,e){var i=(e=e||{}).events||{click:function(){l.hide()}};$.isFunction(i)&&(i={click:i}),$.each(i,function(e,i){s["button"+t].bind(e,{drop:l},i)})});for(var c in s)l.el[c]=s[c];return l};return i}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Tips=e()}(this,function(require){if("function"==typeof require)require("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};var t="ui-tips";$.fn.tips=function(t){return $(this).each(function(){$(this).data("tips")||$(this).data("tips",new e($(this),t))})};var e=function(e,i){var a={attribute:"title",eventType:"hover",content:"",align:"center",delay:100,onShow:$.noop,onHide:$.noop};if("string"==typeof e&&(e=$(e)),!e||!e.length)return this;if(e.length>1)return e.tips(i),e.eq(0).data("tips");var n,r,o=$.extend({},a,i||{}),s=e;if(0==s.is("a,button,input")&&s.attr({tabindex:"0",role:"tooltip"}),s.hasClass(t)){var l=s.attr("title")||s.attr("data-title");return l&&s.attr({"data-title":l,"aria-label":l}).removeAttr("title"),window.addEventListener||(n=$('<span class="ui-tips-before"></span>').html(l),r=$('<i class="ui-tips-after"></i>'),s.prepend(n),s.append(r),n.css("margin-left",-.5*n.outerWidth()),r.css("margin-left",-.5*r.outerWidth())),s.on("click",function(){window.isKeyEvent||this.blur()}),void(s.data("tips")||s.data("tips",this))}var c,d=this;return this._content=function(){var t=o.content;return t||(t=s.attr(o.attribute),"title"==o.attribute&&((t=t||s.data("title"))&&s.attr({"aria-label":t}).data("title",t),s.removeAttr("title"))),t},this.el={trigger:s,tips:void 0},this.callback={show:o.onShow,hide:o.onHide},this.align=o.align,"hover"==o.eventType?(s.hover(function(){var t=d._content();c=setTimeout(function(){d.show(t)},o.delay)},function(){clearTimeout(c),d.hide()}),s.on({"focus":function(){d.show(d._content())},"blur":function(){d.hide()}})):"click"==o.eventType?(s.click(function(){d.show(d._content())}),$(document).mouseup(function(t){var e=t.target,i=s.get(0);1==d.display&&i!=e&&0==i.contains(e)&&0==d.el.tips.get(0).contains(e)&&d.hide()})):this.show(d._content()),this};return e.prototype.show=function(t){if(!(t=t||this.content))return this;var e=this.el.trigger,i=this.el.tips;this.content=t;var a,n;if(i)i.show(),a=i.find("span").html(t),n=i.find("i");else{if(i=$("<div></div>").addClass("ui-tips-x"),a=$('<span class="ui-tips-before"></span>').html(t),n=$('<i class="ui-tips-after"></i>'),!e.attr("aria-label")){var r="t_"+(Math.random()+"").replace("0.","");a.attr("id",r),e.attr("aria-labelledby",r)}$(document.body).append(i.append(a).append(n))}var o=0,s="5-7";return"left"==this.align?o=-.5*a.width()+parseInt(a.css("padding-left"))||0:"right"==this.align?o=.5*a.width()-parseInt(a.css("padding-right"))||0:"rotate"==this.align?s="6-8":"number"==typeof this.align?o=this.align:(e.hasClass("reverse")||"reverse"==this.align)&&(s="7-5",this.align="reverse"),i.addClass("ui-tips-"+this.align),"rotate"!=this.align&&"reverse"!=this.align&&n.css({left:o}),i.follow(e,{offsets:{x:o,y:0},position:s,edgeAdjust:!1}),this.callback.show.call(e,i),this.el.tips=i,this.display=!0,this},e.prototype.hide=function(){return this.el.tips&&(this.el.tips.hide(),this.callback.hide.call(this.el.trigger,this.el.tips)),this.display=!1,this},e.prototype.init=function(e){return e=e||t,$("."+e).tips(),$(document).mouseover(function(t){var i=t&&t.target;if(i&&$(i).hasClass(e)&&!$(i).data("tips")){$(i).tips();var a=$(i).data("tips");a._content&&a.show(a._content())}}),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.LightTip=e()}(this,function(require){"function"==typeof require&&require("common/ui/Enhance");var t="ui-lightip";$.lightTip=function(){var e=function(e){var a=$('<div class="'+t+'"></div>').attr({role:"tooltip",tabindex:"0"});return a.html('<i class="ui-lightip-icon">&nbsp;</i><span class="ui-lightip-text">'+e+"</span>"),$(document.body).append(a),a.css({left:"50%",marginLeft:-.5*a.outerWidth()}),a.zIndex&&a.zIndex(),$.lightTip.activeElement=document.activeElement,a.on("click",function(){i(a)}),a.focus(),a},i=function(t){t&&t.remove(),$.lightTip.activeElement&&($.lightTip.activeElement.focus(),$.lightTip.activeElement.blur())};return{success:function(t,a){var n=e(t).addClass("ui-lightip-success");return n.attr("aria-label","操作成功"),setTimeout(function(){n.fadeOut(function(){i(n)})},a||3e3),n},error:function(t,a){var n=e(t).addClass("ui-lightip-error");return n.attr("aria-label","操作失败"),setTimeout(function(){n.fadeOut(function(){i(n)})},a||3e3),n}}}();var e=function(){return this.el={},this};return e.prototype.success=function(t,e){return this.el.container=$.lightTip.success(t,e),this},e.prototype.error=function(t,e){return this.el.container=$.lightTip.error(t,e),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.ErrorTip=e()}(this,function(require){if("function"==typeof require)require("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};var t="ui-tips";$.fn.errorTip=function(t,i){return $(this).each(function(){new e($(this),t,i)})};var e=function(e,i,a){var n={unique:!0,align:"center",onShow:$.noop,onHide:$.noop},r=$.extend({},n,a||{});if($.isFunction(i)&&(i=i()),"string"!=typeof i)return this;var o,s,l,c=this,d=e;return 1==r.unique&&window.errorTip?o=window.errorTip.data("trigger",d):0==r.unique&&d.data("errorTip")?o=d.data("errorTip"):(o=$('<div class="ui-tips-x ui-tips-error"></div>'),s=$("<span></span>").addClass("ui-tips-before"),l=$("<i></i>").addClass("ui-tips-after"),$(document.body).append(o.append(s).append(l)),1==r.unique?window.errorTip=o.data("trigger",d):d.data("errorTip",o),$(document).bind({keydown:function(t){16!=t.keyCode&&17!=t.keyCode&&c.hide()},mousedown:function(t){var e=document.activeElement,i=o.data("trigger"),a=t.target;e&&i&&e==a&&e==i.get(0)&&0==i.data("focus")||c.hide()}}),$(window).bind({resize:function(){c.hide()}})),this.el={trigger:e,tips:o,before:s||o.find("span"),after:l||o.find("i")},this.callback={show:r.onShow,hide:r.onHide},this.cl=t,this.align=r.align,this.show(i),this};return e.prototype.show=function(t){var e=this.el,i=e.tips,a=e.trigger,n=e.before,r=e.after;n.html(t);var o=this.align,s=0;return"left"==o?s=-.5*n.width()+parseInt(n.css("padding-left"))||0:"right"==o?s=.5*n.width()-parseInt(n.css("padding-right"))||0:"number"==typeof o&&(s=o),r.css({left:s}),i.follow(a,{align:o,position:"5-7",edgeAdjust:!1}),i.show(),a.attr("aria-label","错误提示："+t),this.callback&&this.callback.show&&this.callback.show.call(a.addClass("error valided"),i),this},e.prototype.hide=function(){var t=this.el.tips,e=this.el.trigger;return e.removeAttr("aria-label"),"none"!=t.css("display")&&(t.hide(),this.callback&&this.callback.hide&&this.callback.hide.call((t.data("trigger")||e).removeClass("error"),t)),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Loading=e()}(this,function(){var t="ui-loading",e=t+"-icon";$.fn.isLoading=function(){var t=$(this).eq(0);if(t.is("a,label,input,button"))return t.hasClass("loading");var i=t.find("."+e);return!(!i.length||!i.is(":visible"))},$.fn.loading=function(t){return $(this).each(function(){var e=$(this);e.is("a,label,input,button")?e.addClass("loading"):e.data("loading",new i(e,t))})},$.fn.unloading=function(e){var i=e||0;return"number"!=typeof e&&(i=200),void 0===e&&(e=i),$(this).each(function(a,n){var r=$(this);if(r.is("a,label,input,button"))r.removeClass("loading");else if("function"==typeof history.pushState)if(i>0){var o=r.height();r.css({height:"auto",webkitTransition:"none",transition:"none",overflow:"hidden"});var s=r.height();r.height(o),r.removeClass(t+"-animation"),n.offsetWidth=n.offsetWidth,!1!==e&&r.addClass(t+"-animation"),r.css({webkitTransition:"height "+i+"ms",transition:"height "+i+"ms"}),setTimeout(function(){r.css("overflow","")},i),r.height(s)}else r.css({webkitTransition:"none",transition:"none"}),r.height("auto").removeClass(t);else r.height("auto")})};var i=function(i,a){var n={primary:!1,small:!1,create:!1},r=$.extend({},n,a||{}),o=i,s=null,l=null;return this._create=function(){var i=this.el.container;s=i.find("."+t),l=i.find("."+e),1==r.create&&0==s.length?(s=i.is("ul,ol")?$("<li></li>").addClass(t):$("<div></div>").addClass(t),i.append(s)):0==r.create&&(s=i),0==l.length&&(l=(r.small?$("<s></s>"):$("<i></i>")).addClass(e),s.empty().addClass(t).append(l),r.primary&&s.addClass(t+"-primary")),l.attr({"aria-busy":"true","aria-label":"正在加载中"}),i.attr("data-position",i.css("position")),this.el.loading=s,this.el.icon=l},this.el={container:o,loading:s,icon:l},this.show(),this};return i.prototype.show=function(){var t=this.el;return t.loading&&t.icon||this._create(),t.loading.show(),this.display=!0,this},i.prototype.hide=function(){var t=this.el,i=t.container,a=t.loading;return a&&(i.get(0)!=a.get(0)?a.hide():i.find("."+e).length&&(a.empty(),this.el.icon=null)),this.display=!1,this},i.prototype.remove=function(){var e=this.el,i=e.container,a=e.loading,n=e.icon;return a&&n&&(i.get(0)==a.get(0)?(a.removeClass(t),n.remove()):a.remove(),this.el.loading=null,this.el.icon=null),this.display=!1,this},i.prototype.end=function(t){var i=this.el.container;return i&&(i.unloading(t),0==i.find("."+e).length&&(this.el.icon=null)),this.display=!1,this},i}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Dialog=e()}(this,function(require){"function"==typeof require&&require("common/ui/Loading");var t=window.addEventListener?'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M116.152,99.999l36.482-36.486c2.881-2.881,2.881-7.54,0-10.42 l-5.215-5.215c-2.871-2.881-7.539-2.881-10.42,0l-36.484,36.484L64.031,47.877c-2.881-2.881-7.549-2.881-10.43,0l-5.205,5.215 c-2.881,2.881-2.881,7.54,0,10.42l36.482,36.486l-36.482,36.482c-2.881,2.881-2.881,7.549,0,10.43l5.205,5.215 c2.881,2.871,7.549,2.871,10.43,0l36.484-36.488L137,152.126c2.881,2.871,7.549,2.871,10.42,0l5.215-5.215 c2.881-2.881,2.881-7.549,0-10.43L116.152,99.999z"/></svg>':"",e="WebkitAppearance"in document.documentElement.style||"undefined"!=typeof document.webkitHidden;$.dialog=function(t){return new i(t)};var i=function(i){var a={title:"",content:"",width:"auto",buttons:[],onShow:$.noop,onHide:$.noop,onRemove:$.noop},n=$.extend({},a,i||{}),r={};this.el=r,this.width=n.width,this.callback={show:n.onShow,hide:n.onHide,remove:n.onRemove},r.container=window.addEventListener?$('<dialog class="ui-dialog-container"></dialog>'):$('<div class="ui-dialog-container"></div>'),history.pushState&&r.container.get(0).addEventListener(e?"webkitAnimationEnd":"animationend",function(t){"dialog"==t.target.tagName.toLowerCase()&&this.classList.remove("ui-dialog-animation")}),r.dialog=$('<div class="ui-dialog"></div>').css("width",n.width).attr({tabindex:"-1",role:"dialog"}),r.title=$('<div class="ui-dialog-title" role="heading"></div>').html(n.title);var o=("id_"+Math.random()).replace("0.","");r.close=$('<a href="javascript:" class="ui-dialog-close ESC"></a>').attr({role:"button","aria-label":"关闭",id:o,"data-target":o}).html(t).click($.proxy(function(t){t.preventDefault();var e=document.activeElement,i=e.getAttribute("data-target"),a=i&&document.getElementById(i);window.isKeyEvent&&a&&e!=r.close[0]&&document.querySelector('a[data-target="'+i+'"],input[data-target="'+i+'"]')&&a.clientWidth>0||this[this.closeMode]()},this));var s=n.content;$.isFunction(s)&&(s=s()),s.size?this.closeMode="hide":this.closeMode="remove",r.body=$('<div class="ui-dialog-body"></div>')[s.size?"append":"html"](s),r.footer=$('<div class="ui-dialog-footer"></div>'),this.button(n.buttons),r.container.append(r.dialog.append(r.close).append(r.title).append(r.body).append(r.footer)),document.querySelector||r.container.append('<i class="ui-dialog-after"></i>');var l=$(".ui-dialog-container");return l.length?l.eq(0).before(r.container.css({zIndex:1*l.eq(0).css("z-index")+1})):(n.container||$(document.body)).append(r.container),this.display=!1,n.content&&this.show(),this};return i.prototype.button=function(t){var e=this.el,i=this;return e.footer.empty(),$.each(t,function(t,a){a=a||{};var n=t?a.type||"":a.type||"primary",r=t?a.value||"取消":a.value||"确定",o=a.events||{click:function(){i[i.closeMode]()}};$.isFunction(o)&&(o={click:o});var s="ui-button";n&&(s=s+" "+s+"-"+n),a["for"]?e["button"+t]=$('<label for="'+a["for"]+'" class="'+s+'" role="button">'+r+"</label>"):e["button"+t]=$('<a href="javascript:" class="'+s+'" role="button">'+r+"</a>"),$.each(o,function(a,n){e["button"+t].bind(a,{dialog:i},n),e["button"+t].on("focus",function(){$(this).css("outline",window.isKeyEvent?"":"none")})}),e.footer.append(e["button"+t])}),i},i.prototype.loading=function(){if(!$().loading)return window.console&&window.console.error("need Loading.js"),e;var t=this.el,e=this;return t&&(t.container.attr("class",["ui-dialog-container","ui-dialog-loading"].join(" ")),t.body.loading(),e.show()),e},i.prototype.unloading=function(t){if(!$().unloading)return window.console&&window.console.error("need Loading.js"),i;var e=this.el,i=this;return e&&(e.container.removeClass("ui-dialog-loading"),e.body.unloading(t)),i},i.prototype.open=function(t,e){var i=this.el,a=this,n={title:"",buttons:[]},r=$.extend({},n,e||{});return i&&t&&(i.container.attr("class",["ui-dialog-container"].join(" ")),i.title.html(r.title),i.body.html(t),a.button(r.buttons).show()),a},i.prototype.alert=function(t,e){var i=this.el,a=this,n={title:"",type:"remind",buttons:[{}]},r=$.extend({},n,e||{});return r.buttons[0].type||"remind"==r.type||(r.buttons[0].type=r.type),i&&t&&(i.container.attr("class",["ui-dialog-container","ui-dialog-alert"].join(" ")),i.dialog.width("auto").attr({role:"alertdialog"}),i.title.html(r.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),i.body.html('<div class="ui-dialog-'+r.type+' ui-dialog-alert">'+t+"</div>"),this.button(r.buttons).show(),i.button0&&i.button0.focus()),a},i.prototype.confirm=function(t,e){var i=this.el,a=this,n={title:"",type:"warning",buttons:[{type:"warning"},{}]},r=$.extend({},n,e||{});return r.buttons.length&&!r.buttons[0].type&&(r.buttons[0].type="warning"),i&&t&&(i.container.attr("class",["ui-dialog-container","ui-dialog-confirm"].join(" ")),i.dialog.width("auto"),i.title.html(r.title),0==/<[\w\W]+>/.test(t)&&(t="<p>"+t+"</p>"),i.body.html('<div class="ui-dialog-'+r.type+' ui-dialog-confirm">'+t+"</div>"),this.button(r.buttons).show(),i.button0&&i.button0.focus()),a},i.prototype.ajax=function(t,e){var i=this,a={dataType:"JSON",timeout:3e4,error:function(t,e){var a="";a="timeout"==e?"<p>主要是由于请求时间过长，数据没能成功加载，这一般是由于网速过慢导致，您可以稍后重试！</p>":"parsererror"==e?"<p>原因是请求的数据含有不规范的内容。一般出现这样的问题是开发人员没有考虑周全，欢迎向我们反馈此问题！</p>":"<p>一般是网络出现了异常，如断网；或是网络临时阻塞，您可以稍后重试！如依然反复出现此问题，欢迎向我们反馈！</p>",i.alert("<h6>尊敬的用户，很抱歉您刚才的操作没有成功！</h6>"+a,{type:"warning"}).unloading()}},n=$.extend({},a,t||{});if(!n.url)return this;var r={title:"",content:function(t){return"string"==typeof t?t:"看见我说明没使用'options.content'做JSON解析"},buttons:[]},o=$.extend({},r,e||{}),s=(new Date).getTime(),l=n.success;return n.success=function(t){i.open(o.content(t),o),(new Date).getTime()-s<100?i.unloading(0):i.unloading(),$.isFunction(l)&&l.apply(this,arguments)},i.loading(),$.ajax(n),i},i.prototype.scroll=function(){var t=!1;if($(".ui-dialog-container").each(function(){"block"==$(this).css("display")&&(t=!0)}),t){var e=17;1!=this.display&&"number"==typeof window.innerWidth&&(e=window.innerWidth-document.documentElement.clientWidth),document.documentElement.style.overflow="hidden",1!=this.display&&$(document.body).css("border-right",e+"px solid transparent")}else document.documentElement.style.overflow="",$(document.body).css("border-right","");return this},i.prototype.tabindex=function(){var t=this.el.dialog,e=this.lastActiveElement;if(1==this.display){var i=document.activeElement;t[0]!==i&&(this.lastActiveElement=i),t&&t.focus()}else e&&"body"!=e.tagName.toLowerCase()&&(e.focus(),e.blur(),this.lastActiveElement=null);return t},i.prototype.show=function(){var t=this.el&&this.el.container;return t&&(t.css("display","block"),1!=this.display&&t.addClass("ui-dialog-animation"),this.scroll(),this.display=!0,this.tabindex(),$.isFunction(this.callback.show)&&this.callback.show.call(this,t)),this},i.prototype.hide=function(){var t=this.el.container;return t&&(t.hide(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.hide)&&this.callback.hide.call(this,t)),this},i.prototype.remove=function(){var t=this.el&&this.el.container;return t&&(t.remove(),this.scroll(),this.display=!1,this.tabindex(),$.isFunction(this.callback.remove)&&this.callback.remove.call(this,t)),this},i}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Datalist=e()}(this,function(require){if("function"==typeof require)require("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};var t="ui-datalist";$.stripHTML=function(t){return"string"==typeof t?t.replace(/<\/?[^>]*>/g,""):""},$.encodeHTML=function(t){return"string"==typeof t?t.replace(/<|&|>/g,function(t){return{"<":"&lt;",">":"&gt;","&":"&amp;"}[t]}):""},$.decodeHTML=function(t){return"string"==typeof t?t.replace(/&lt;|&gt;|&amp;/g,function(t){return{"&lt;":"<","&gt;":">","&amp;":"&"}[t]}):""},$.fn.datalist=function(t){return $(this).each(function(){$(this).data("datalist")||$(this).data("datalist",new e($(this),t))})};var e=function(t,e){if(t){1==t.nodeType&&(t=$(t));var i={data:"auto",max:8,width:"auto",container:$(document.body),filter:function(t,e){var i=[];return $.isArray(t)&&$.each(t,function(t,a){""!=e&&0!=a.value.indexOf(e)||i.push(a)}),i},trigger:["change"],onShow:$.noop,onHide:$.noop};e=e||{};var a=t.attr("results");a&&(e.max=+a);var n=$.extend({},i,e),r=this;if(r.el={input:t,trigger:t,container:n.container},r.callback={trigger:n.trigger,filter:n.filter,show:n.onShow,hide:n.onHide},r.params={width:n.width,max:n.max,data:n.data,index:-1},this.bool={modern:"oninput"in document.createElement("div")},r.display=!1,"auto"==n.data){var o=t.attr("name"),s=t.attr("autocomplete");o&&"off"!=s&&t.attr("autocomplete","off"),this.callback.data=function(){var t=[];if(window.localStorage&&o&&"off"!=s){var e=localStorage["datalist-"+o];e&&$.each(e.split(","),function(e,i){i&&t.push({label:"",value:i})})}return t},t.parents("form").on("submit",function(){r.store()})}else if($.isArray(n.data))this.callback.data=function(){return n.data};else if($.isFunction(n.data))this.callback.data=n.data;else if($.isPlainObject(n.data)&&n.data.url){t.attr("autocomplete","off"),e.filter||(r.callback.filter=function(t){return t});var l=n.data.success;this.callback.data=function(){clearTimeout(r.ajaxTimer);var e=$.extend({},{dataType:"json"},n.data);e.data=e.data||{};var i=t.attr("name")||"k",a=$.trim(t.val());if(""==a)return r.data=[],[];e.data[i]=a,e.success=function(t){l&&l.apply(e,arguments),t&&$.isArray(t.data)&&r.refresh(r.callback.filter.call(r,t.data))},r.ajaxTimer=setTimeout(function(){$.ajax(e)},200)}}this.events()}else window.console&&window.console.error("Datalist实例方法参数缺失")};return e.prototype.store=function(){var t=this.el.trigger,e=this.value(),i=t.attr("name");if(window.localStorage&&"auto"==this.params.data&&e&&i){var a=(localStorage["datalist-"+i]||"").split(","),n=$.inArray(e,a);-1==n?a.unshift(e):0!=n&&(a=a.splice(n,1).concat(a)),localStorage["datalist-"+i]=a.join()}return this},e.prototype.removeStore=function(t){var e=this.el.trigger.attr("name");if(t=t||this.value(),window.localStorage&&"auto"==this.params.data&&e&&t)if(!0===t)localStorage.removeItem("datalist-"+e);else if("string"==typeof t){var i=(localStorage["datalist-"+e]||"").split(","),a=$.inArray(t,i);-1!=a&&(i.splice(a,1),localStorage["datalist-"+e]=i.join())}return this},e.prototype.refresh=function(e){var i=this,a=this.el.target;a||(this.create(),a=this.el.target);var n=this.value();if(void 0===e&&(e=this.callback.filter.call(this,this.callback.data(),n),0==$.isArray(e)))return this;"number"==typeof this.params.max&&(e=e.slice(0,this.params.max)),this.data=e;var r="";if(e&&e.length&&(i.params.index=-1,$.each(e,function(e,a){var o=$.trim($.stripHTML(a.value||"")),s=$.trim($.stripHTML(a.label||"")),l="";n&&o==n&&(l=" selected",i.params.index=e),r=a.label?r+'<li class="'+t+"-option"+l+'" value="'+o+'" label="'+s+'" data-index="'+e+'"><label class="'+t+'-label">'+a.label+'</label><span class="'+t+'-value">'+a.value+"</span></li>":r+'<li class="'+t+"-option"+l+'" value="'+o+'" data-index="'+e+'"><span class="'+t+'-value">'+a.value+"</span></li>"})),""!=r&&(r='<ul class="'+t+'-datalist">'+r+"</ul>"),a.html(r),r?0==this.display&&this.show():1==this.display&&this.hide(),1==this.display){var o=a.find(".selected")[0];o&&$(o).parent().scrollTop(o.offsetTop)}},e.prototype.create=function(){var e=this,i=this.el.trigger;if(!this.el.target){var a=i.attr("list");a||(a="datalist"+(Math.random()+"").split(".")[1],i.attr("list",a));var n=$('<div id="'+a+'">').addClass(t).on("click","li",function(){var t=$(this).attr("value");e.value(t),e.hide()});i.attr("id")&&n.addClass("datalist-"+i.attr("id").toLowerCase()),e.el.container.append(n),this.el.target=n,this.display=!1}return this},e.prototype.value=function(t){var e=this.el.trigger,i=this.callback.trigger;return void 0===t?$.encodeHTML($.trim(e.val())):(e.val($.decodeHTML($.trim(t+""))),t&&i&&(this.bool.modern?$.isArray(i)?-1==$.inArray("input",i)&&i.push("input"):i=i&&"string"==typeof i&&"input"!=i?["input",i]:["input"]:0==$.isArray(i)&&(i=[i]),$.each(i,function(t,i){e.trigger(i)})),this)},e.prototype.events=function(){var t=this,e=this.el.trigger;e.on({blur:function(){$(this).data("focus",!1)},click:function(){0!=t.display||1!=$(this).data("focus")||"auto"!=t.params.data&&!$.trim(this.value)||t.refresh(),$(this).data("focus",!0)},input:function(e){e.isTrigger||($.trim(this.value)?t.refresh():t.hide())},keydown:function(e){var a=t.data,n=t.params.index;switch(e.keyCode){case 27:case 13:1==t.display&&(t.hide(),e.preventDefault(),this.value&&t.el.target.find(".selected").length&&(e.preventDefault(),setTimeout(function(){var t=e.target;if(t.setSelectionRange)try{t.setSelectionRange(t.value.length,t.value.length)}catch(a){t.value=t.value}else t.value=t.value;i&&$(t).trigger("input")},17)));break;case 38:1==t.display&&a&&a.length&&--n<0&&(n=a.length-1);break;case 40:1==t.display&&a&&a.length&&++n>a.length-1&&(n=0);break;case 46:if(1==t.display&&"auto"==t.params.data){var r=t.el.target.find(".selected");if(r.length){var o=r.attr("value");t.removeStore(o),a=$.grep(a,function(t){return t.value!=o}),e.preventDefault(),$(this).data("stopPropertyChange",!0);var s=a[n]||a[n-1];s?(t.value($.stripHTML(s.value)),t.refresh(a)):(this.value="",t.hide())}}}38!=e.keyCode&&40!=e.keyCode||(e.preventDefault(),$(this).data("stopPropertyChange",!0),a[n]&&t.value($.stripHTML(a[n].value)),$(this).select(),t.refresh(a))}});var i=this.bool.modern;return e.length&&0==i&&e[0].attachEvent("onpropertychange",function(i){i&&"value"==i.propertyName&&!e.data("stopPropertyChange")&&($.trim(e.val())?t.refresh():t.hide()),$(this).data("stopPropertyChange",!1)}),$(document).mouseup(function(i){var a=i.target,n=t.el.target;a&&n&&a!=e[0]&&a!=n[0]&&0==n[0].contains(a)&&t.hide()}),$(window).resize(function(){1==t.display&&t.position()}),this},e.prototype.position=function(){var t=this.el.trigger,e=this.el.target;return t&&e&&(e.follow(t,{edgeAdjust:!1}),1==this.display&&t.addClass("active")),this},e.prototype.show=function(){var t=this.el.trigger,e=this.el.target;e||(this.create(),e=this.el.target);var i=this.display,a=this.params.width;"auto"==a?a=t.outerWidth():$.isFunction(a)&&(a=a.call(this,t,e)),"auto"!=a&&"number"!=typeof a&&(a=t.width()),e.css({display:"block",width:a}),this.display=!0,this.position(),0==i&&this.callback.show.call(this,t,e)},e.prototype.hide=function(){var t=this.el.trigger,e=this.el.target;e&&1==this.display&&(e.hide().removeClass("reverse"),this.callback.hide.call(this,t,e)),t.removeClass("active").removeClass("reverse"),this.display=!1},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Select=e()}(this,function(require){"function"==typeof require&&require("common/ui/Enhance");var t="ui-select",e="ui-".replace(/[a-z]/gi,"");$.fn.selectMatch=function(){return $(this).each(function(){var t=$(this);t.data("select")?t.data("select").refresh():new i(t)})};var i=function(i){if(i){i.length||(i=$(i));var a=i[0].id;a||(a=("id_"+Math.random()).replace("0.","")),this.id=a;var n=i.prop("multiple");this.multiple=n;var r=$("<div></div>").attr({role:"combobox"}),o=$("<a></a>").attr({href:"javascript:","data-target":a,role:"button","aria-expanded":"false","aria-owns":a}).addClass(t+e+"button"),s=$("<div></div>").attr({id:a,role:"listbox","aria-expanded":"true"}).addClass(t+e+"datalist");n?(r.append(s),i.css({position:"absolute",zIndex:1}).after(r),s.attr("aria-hidden","true")):(r.append(o).append(s),i.hide().after(r)),this.el={sel:i,combobox:r,button:o,datalist:s},this.refresh(),this.events(),i.data("select",this)}else window.console&&window.console.error("Select实例方法参数缺失")};return i.prototype.events=function(){var t=this,e=t.el,i=e.sel,a=e.combobox,n=e.button,r=e.datalist;this.multiple?(i.on("change",function(){t.refresh()}),i.on("scroll",function(){r.scrollTop(i.scrollTop())}),i.on("mousedown",function(){i.data("active","true")}).on("mousemove",function(e){if(i.data("active"))t.refresh();else{var a=e.clientY,n=r.find("a");n.removeAttr("href"),n.each(function(){var t=this.getBoundingClientRect().top,e=t+this.clientHeight;if(a>=t&&a<=e)return 0==$(this).hasClass("selected")&&(this.href="javascript:"),!1})}}).on("mouseout",function(){r.find("a").removeAttr("href")}),$(document).on("mouseup",function(){i.removeData("active")})):(n.on("click",function(){if(i.prop("disabled"))return!1;if(a.toggleClass("active"),a.hasClass("active")){var t=r.offset().top+r.outerHeight()>Math.max($(document.body).height(),$(window).height());a[t?"addClass":"removeClass"]("reverse"),n.attr("aria-expanded","true");var e=a.data("scrollTop"),o=r.find(".selected");e&&e[1]==o.attr("data-index")&&e[2]==o.text()&&(r.scrollTop(e[0]),a.removeData("scrollTop"))}else a.removeClass("reverse"),n.attr("aria-expanded","false")}),r.on("click","a[data-index]",function(){var e=$(this).hasClass("disabled"),o=$(this).data("index"),s=r.scrollTop();a.data("scrollTop",[s,o,$(this).text()]),0==e&&(i.find("option")[o].selected=!0),a.removeClass("active"),n.attr("aria-expanded","false"),n.focus().blur(),0==e&&(t.refresh(),i.trigger("change"))}),$(document).on("mouseup",function(t){var e=t.target;e&&a.hasClass("active")&&a[0]!==e&&0==a[0].contains(e)&&a.removeClass("active").removeClass("reverse")}))},i.prototype.getData=function(){var t=this.el.sel.find("option");return 0==t.length?[{html:""}]:t.map(function(){var t=this;return{html:t.innerHTML,value:t.value,selected:t.selected,disabled:t.disabled,className:t.className}})},i.prototype.refresh=function(i){var a=this,n=a.id,r=a.multiple,o=a.el,s=o.sel,l=o.combobox,c=o.button,d=o.datalist;return i=i||a.getData(),l.attr("class",$.trim(s[0].className+" "+t)).width(s.outerWidth()),r?l.height(s.outerHeight()):c.html('<span class="'+t+e+'text">'+function(){var t="";return $.each(i,function(e,i){i.selected&&(t=i.html)}),t||i[0].html}()+'</span><i class="'+t+e+'icon" aria-hidden="true"></i>'),d.html($.map(i,function(i,a){var o=[t+e+"datalist"+e+"li",i.className];return i.selected&&o.push("selected"),i.disabled&&o.push("disabled"),r?'<a class="'+o.join(" ")+'" data-index='+a+">"+i.html+"</a>":"<a "+(i.disabled?"":'href="javascript:" ')+'class="'+o.join(" ")+'" data-index='+a+' data-target="'+n+'" role="option" aria-selected="'+i.selected+'">'+i.html+"</a>"}).join("")),this},i}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.DateTime=e()}(this,function(require){if("function"==typeof require)require("common/ui/Follow");else if(!$().follow)return window.console&&window.console.error("need Follow.js"),{};var t="selected",e=/-|\//g;String.prototype.toDate=function(){var t,i,a,n=this.split(e);return t=1*n[0],i=n[1]||1,a=n[2]||1,t?new Date(t,i-1,a):new Date},Date.prototype.toArray=function(){var t=this.getFullYear(),e=this.getMonth()+1,i=this.getDate();return e<10&&(e="0"+e),i<10&&(i="0"+i),[t,e,i]};var i=function(e,i){if(!e||!e.length)return this;var a={value:"",type:"auto",min:"auto",max:"auto",trigger:["change"],onShow:$.noop,onHide:$.noop},n=$.extend({},a,i||{}),r=null;if(e.get(0).type?e=(r=e).parent():r=e.find("input"),0==r.length)return this;r.prop("readonly",!0),r.parent().hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var o=n.type;"auto"==o&&(o=r.attr("type")||"date");var s=r.attr("id");s||(s=o+(Math.random()+"").replace("0.",""),r.attr("id",s)),$('<label for="'+s+'"></label>').addClass("ui-date-arrow").insertAfter(r);var l=r.val();switch(""==l&&n.value&&(r.val(n.value),l=n.value),o){case"date":case"year":case"month":var c=l.toDate().toArray();""==l&&("date"==o?r.val(c.join("-")):"year"==o?r.val(c[0]):"month"==o&&r.val(c.slice(0,2).join("-"))),this[t]=c;break;case"time":case"hour":case"minute":var d=l.split(":"),h=d[0],u=d[1];""!=l&&h<24&&h>0?(u>0&&u<60&&"hour"!=o?1==u.length&&(u="0"+u):u="00",1==h.length&&(h="0"+h)):(h="00",u="00"),r.val([h,u].join(":")),this[t]=[h,u];break;case"date-range":case"month-range":var p=new Date,f=new Date,v=l.split(" ");if(""!=l&&1==v.length){var g=v[0].toDate();g.getTime()>p.getTime()?f=g:p=g}else p=v[0].toDate(),f=v[v.length-1].toDate();var m=p.toArray(),y=f.toArray();"date-range"==o?r.val(m.join("-")+" 至 "+y.join("-")):r.val(m.slice(0,2).join("-")+" 至 "+y.slice(0,2).join("-")),this[t]=[m,y]}var b=this,w=$("<div></div>").addClass("ui-date-container").delegate("a","click",function(){var e,i,a=0,n=0,r=0,o=0,s=[];switch(w.attr("data-type")){case"date":if(/prev|next/.test(this.className)){n=$(this).attr("data-month"),b[t][1]=1*n;var l=b._monthDay(b[t]),c=b[t][2],d=w.data("dayOverflow"),h=n-1<0?l[11]:n>l.length?l[0]:l[n-1];d?b[t][2]=Math.min(d,h):b[t][2]>h&&(b[t][2]=h,w.data("dayOverflow",c)),b[t]=b[t].join("-").toDate().toArray(),b.date(),w.find(".selected").get(0).href&&b.val()}else/item/.test(this.className)?(r=this.innerHTML,/\D/.test(r)?b[t]=(new Date).toArray():(r<10&&(r="0"+r),b[t][2]=r),b.val(),b.hide(),w.removeData("dayOverflow")):"month"==$(this).attr("data-type")&&b.month();break;case"date-range":/prev|next/.test(this.className)?(n=1*$(this).attr("data-month"),s=b.el.container.data("date")||b[t][0],b.el.container.data("date",new Date(s[0],n-1,1).toArray()),b["date-range"]()):/item/.test(this.className)?(a=$(this).attr("data-year"),n=$(this).attr("data-month"),r=this.innerHTML,n<10&&(n="0"+n),r<10&&(r="0"+r),(e=b[t])[0].join()==e[1].join()?a+n+r>e[0].join("")?e[1]=[a,n,r]:e[0]=[a,n,r]:e=[[a,n,r],[a,n,r]],b[t]=e,b["date-range"]()):/button/.test(this.className)&&("ensure"==(i=$(this).attr("data-type"))?(b.val(),b._rangeSelected=b[t],b.hide()):"cancel"==i&&(b._rangeSelected&&(b[t]=b._rangeSelected),b.hide()));break;case"month-range":/prev|next/.test(this.className)?(a=1*$(this).attr("data-year"),s=b.el.container.data("date")||b[t][0],b.el.container.data("date",new Date(a,s[1],1).toArray()),b["month-range"]()):/item/.test(this.className)?(a=$(this).attr("data-year"),n=$(this).attr("data-value"),r="01",(e=b[t])[0].join()==e[1].join()?a+n+r>e[0].join("")?e[1]=[a,n,r]:e[0]=[a,n,r]:e=[[a,n,r],[a,n,r]],b[t]=e,b["month-range"]()):/button/.test(this.className)&&("ensure"==(i=$(this).attr("data-type"))?(b.val(),b._rangeSelected=b[t],b.hide()):"cancel"==i&&(b._rangeSelected&&(b[t]=b._rangeSelected),b.hide()));break;case"month":if(/prev|next/.test(this.className))a=$(this).attr("data-year"),b[t][0]=1*a,b.month(),w.find(".selected").get(0).href&&b.val();else if(/item/.test(this.className)){var u=$(this).attr("data-value");if(u)b[t][1]=u;else{var p=(new Date).toArray();b[t][0]=p[0],b[t][1]=p[1]}b.val(),"month"==b.type?b.hide():b.date()}else"year"==$(this).attr("data-type")&&b.year();break;case"year":/prev|next/.test(this.className)?(a=$(this).attr("data-year"),b[t][0]=1*a,b.year(),w.find(".selected").get(0).href&&b.val()):/item/.test(this.className)&&("今年"==this.innerHTML?b[t][0]=(new Date).getFullYear():b[t][0]=1*this.innerHTML,b.val(),"year"==b.type?b.hide():b.month());break;case"minute":/prev|next/.test(this.className)?(1==(o=$(this).attr("data-hour")).length&&(o="0"+o),b[t][0]=o,b.minute(),w.find(".selected").attr("href")&&b.val()):/item/.test(this.className)?(b[t]=this.innerHTML.split(":"),b.val(),b.hide()):"hour"==$(this).attr("data-type")&&b.hour();break;case"hour":/item/.test(this.className)&&(b[t][0]=this.innerHTML.split(":")[0],b.val(),"hour"==b.type?b.hide():b.minute())}});this.el={},this.el.container=w,this.el.trigger=e,this.el.input=r,this.type=o,this.max=n.max,this.min=n.min,this.callback={show:n.onShow,hide:n.onHide,trigger:n.trigger},e.click($.proxy(function(t){this.display?this.hide():this.show(),t.preventDefault()},this));var x=("d_"+Math.random()).replace("0.","");return w.attr("id",x).addClass("ESC"),r.attr("data-target",x),w.attr("data-id",s),r.on({keydown:function(t){13==t.keyCode&&(this.click(),t.preventDefault())},focus:function(){window.isKeyEvent&&e.addClass("ui-outline")},blur:function(){e.removeClass("ui-outline")}}),$(document).mouseup($.proxy(function(t){var i=t&&t.target,a=this.el.container[0];i&&e[0]!=i&&0==e[0].contains(i)&&a!=i&&0==a.contains(i)&&this.hide()},this)),this.svg="",window.addEventListener&&(this.svg='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M85.876,100.5l49.537-50.526c4.089-4.215,4.089-11.049,0-15.262 c-4.089-4.218-10.719-4.218-14.808,0L63.586,92.868c-4.089,4.215-4.089,11.049,0,15.264l57.018,58.156 c4.089,4.215,10.719,4.215,14.808,0c4.089-4.215,4.089-11.049,0-15.262L85.876,100.5z"/></svg>'),this};return i.prototype.format=function(){var e=this.type,i=this.el.input.val();if(""==i)return this;switch(e){case"date":case"year":case"month":var a=i.toDate().toArray();this[t]=a;break;case"time":case"hour":case"minute":var n=i.split(":"),r=n[0],o=n[1];2==n.length&&(o>0&&o<60&&"hour"!=e?1==o.length&&(o="0"+o):o="00",1==r.length&&(r="0"+r),this.el.input.val([r,o].join(":")),this[t]=[r,o]);break;case"date-range":case"month-range":var s=new Date,l=new Date,c=i.split(" ");3==c.length&&(s=c[0].toDate(),l=c[c.length-1].toDate(),this[t]=[s.toArray(),l.toArray()])}return this},i.prototype.val=function(){var e=this.el.input,i=this[t],a=e.val();switch(this.type){case"date":e.val(i.join("-"));break;case"month":e.val(i.slice(0,2).join("-"));break;case"year":e.val(i[0]);break;case"date-range":e.val(i[0].join("-")+" 至 "+i[1].join("-"));break;case"month-range":e.val(i[0].slice(0,2).join("-")+" 至 "+i[1].slice(0,2).join("-"));break;case"time":case"minute":e.val(i.join(":"));break;case"hour":e.val(i[0]+":00")}return e.val()!=a&&($.isArray(this.callback.trigger)?$.each(this.callback.trigger,function(t,i){e.trigger(i)}):e.trigger(this.callback.trigger)),this},i.prototype._calendar=function(i){var a="",n=i,r=this.el.input,o=this.type,s=r.attr("min")||this.min,l=r.attr("max")||this.max,c=$.map([s,l],function(t,i){return"string"==typeof t&&1==/^\d{8}$/.test(t.replace(e,""))?t=t.toDate():"object"==typeof t&&t.getTime||(t=i?new Date(9999,0,1):new Date(0,0,1)),t});s=c[0],l=c[1];var d=["日","一","二","三","四","五","六"],h=this._monthDay(n),u=n.join("-").toDate();a=a+'<div class="ui-day-x">'+function(){var t="";return $.each(d,function(e,i){t=t+'<span class="ui-day-item">'+i+"</span>"}),t}()+"</div>";var p=n.join("-").toDate(),f=0;p.setDate(1),2==p.getDate()&&p.setDate(0),f=p.getDay();var v=p.getMonth()-1;v<0&&(v=11);var g='data-year="'+n[0]+'" data-month="'+(p.getMonth()+1)+'"',m="";return a=a+'<div class="ui-date-body">'+function(){for(var e="",i="",a=0;a<6;a++){e+='<div class="ui-date-tr">';for(var r=0;r<7;r++){i="ui-date-item col"+r;var c,d,y=n[0],$=p.getMonth()+1;if("date"==o)0==a&&r<f?(c=h[v]-f+r+1,d=new Date(y,v,c),e=e+'<span class="'+i+'" '+(m="data-date="+d.toArray().join("-"))+">"+c+"</span>"):(c=7*a+r-f+1)<=h[p.getMonth()]?(d=new Date(y,p.getMonth(),c),m="data-date="+d.toArray().join("-"),u.getDate()==c&&(i=i+" "+t),e=d>=s&&d<=l?e+'<a href="javascript:;" '+g+' class="'+i+'" '+m+">"+c+"</a>":e+'<span class="'+i+'" '+m+">"+c+"</span>"):(c-=h[p.getMonth()],e=e+'<span class="'+i+'" '+(m="data-date="+new Date(y,$,c).toArray().join("-"))+">"+c+"</span>");else if("date-range"==o)if(0==a&&r<f)e=e+'<span class="'+i+'">&nbsp;</span>';else if((c=7*a+r-f+1)<=h[p.getMonth()]){d=new Date(y,p.getMonth(),c),m="data-date="+d.toArray().join("-");var b=this[t][0].join("-").toDate(),w=this[t][1].join("-").toDate(),x=d.getTime(),k=b.getTime(),j=w.getTime();x>=k&&x<=j&&(i=i+" "+t,x==k&&(i+=" ui-date-begin"),x==j&&(i+=" ui-date-end"),1==c?i+=" ui-date-first":c==h[p.getMonth()]&&(i+=" ui-date-last")),e=d>=s&&d<=l?e+'<a href="javascript:;" '+g+' class="'+i+'" '+m+">"+c+"</a>":e+'<span class="'+i+'" '+m+">"+c+"</span>"}else e=e+'<span class="'+i+'">&nbsp;</span>'}e+="</div>"}return e}.call(this)+"</div>",{monthDay:h,html:a,min:s,max:l}},i.prototype._monthDay=function(t){var e=t;0==$.isArray(t)&&(e=t.toArray());var i=[31,28,31,30,31,30,31,31,30,31,30,31];return(e[0]%4==0&&e[0]%100!=0||e[0]%400==0)&&(i[1]=29),i},i.prototype._datePrevMonth=function(t){var e=t;0==$.isArray(t)&&(e=t.toArray());var i=1*e[1],a=this._monthDay(e);return 1==i?[e[0]-1,12,e[2]].join("-").toDate():a[i-2]<e[2]?[e[0],i-1,a[i-2]].join("-").toDate():[e[0],i-1,e[2]].join("-").toDate()},i.prototype._dateNextMonth=function(t){var e=t;0==$.isArray(t)&&(e=t.toArray());var i=1*e[1],a=this._monthDay(e);return 12==i?[e[0]+1,1,e[2]].join("-").toDate():a[i]<e[2]?[e[0],i+1,a[i]].join("-").toDate():[e[0],i+1,e[2]].join("-").toDate()},i.prototype.date=function(){var e=this[t],i=e[1]-1,a=1*e[1]+1,n=this._calendar(e),r='<div class="ui-date-x">';r+='<div class="ui-date-head">';var o=this._datePrevMonth(e),s=o.getMonth(),l=o.getFullYear();r=new Date(l,s,n.monthDay[s])>=n.min&&o<=n.max?r+'<a href="javascript:" class="ui-date-prev" data-month="'+i+'">'+this.svg+"</a>":r+'<span class="ui-date-prev">'+this.svg+"</span>";var c=this._dateNextMonth(e),d=c.getMonth(),h=c.getFullYear();return r=c>=n.min&&new Date(h,d,1)<=n.max?r+'<a href="javascript:" class="ui-date-next" data-month="'+a+'">'+this.svg+"</a>":r+'<span class="ui-date-next">'+this.svg+"</span>",r=r+'<a href="javascript:" class="ui-date-switch" data-type="month">'+e.slice(0,2).join("-")+"</a>        </div>",r+=n.html,new Date>=n.min&&new Date<=n.max?r+='<a href="javascript:" class="ui-date-item ui-date-now">今天</a>':r+='<span class="ui-date-item ui-date-now">今天</span>',r+="</div>",this.el.container.attr("data-type","date").html(r),this},i.prototype["date-range"]=function(){var e=this[t],i=this.el.container.data("date")||e[0];this.el.container.data("date",i);var a=i[1]-1,n=1*i[1]+1,r=this._calendar(i),o='<div class="ui-range-x">';o+='<div class="ui-date-head">            <div class="ui-date-half">';var s=new Date(i[0],a-1,i[2]);o=(o=s>=r.min&&s<=r.max?o+'<a href="javascript:" class="ui-date-prev" data-month="'+a+'" aria-label="上一个月，当前'+i[1]+'月">'+this.svg+"</a>":o+'<span class="ui-date-prev">'+this.svg+"</span>")+'<span class="ui-date-switch">'+new Date(i[0],a,i[2]).toArray().slice(0,2).join("-")+'</span>        </div>        <div class="ui-date-half">';var l=new Date(i[0],i[1],1),c=new Date(i[0],n,i[2]);return o=c>=r.min&&c<=r.max?o+'<a href="javascript:" class="ui-date-next" data-month="'+n+'" aria-label="下一个月，当前'+n+'月">'+this.svg+"</a>":o+'<span class="ui-date-next">'+this.svg+"</span>",o=o+'<span class="ui-date-switch">'+l.toArray().slice(0,2).join("-")+"</span>        </div>",o+="</div>",o=o+'<div class="ui-range-body ui-range-date-body"><div class="ui-date-half">'+r.html+'</div><div class="ui-date-half">'+this._calendar(l.toArray()).html+"</div></div>",o+='<div class="ui-range-footer"><a href="javascript:;" class="ui-button ui-button-primary" data-type="ensure">确定</a><a href="javascript:;" class="ui-button" data-type="cancel">取消</a></div>',o+="</div>",this.el.container.attr("data-type","date-range").html(o),this},i.prototype._month=function(i){var a=this.el.input,n=a.attr("min")||this.min,r=a.attr("max")||this.max,o=$.map([n,r],function(t,i){return t="object"==typeof t&&t.getTime?t.toArray().slice(0,2).join(""):"string"==typeof t&&0==/\D/.test(t.replace(e,""))?t.replace(e,"").slice(0,6):i?"999912":"000000"});n=o[0],r=o[1];var s=["一","二","三","四","五","六","七","八","九","十","十一","十二"],l=1*i[0],c=this.type;return{html:'<div class="ui-month-body">'+function(){for(var e="",a="",o="",d=1;d<=12;d+=1){if(o=d<10?"0"+d:d+"",a="ui-date-item","month"==c)d==i[1]&&(a=a+" "+t);else if("month-range"==c){var h=this[t][0].slice(0,2).join(""),u=this[t][1].slice(0,2).join(""),p=l+o;p>=h&&p<=u&&(a=a+" "+t)}e=l+o>=n&&l+o<=r?e+'<a href="javascript:" class="'+a+'" data-year="'+l+'" data-value="'+o+'">'+s[d-1]+"月</a>":e+'<span class="'+a+'" data-value="'+o+'">'+s[d-1]+"月</span>"}return e}.call(this)+"</div>",min:n,max:r}},i.prototype.month=function(){var e=this[t],i=this._month(e),a=i.min,n=i.max,r='<div class="ui-month-x">',o=1*e[0];r+='<div class="ui-date-head">',r=o-1>=Math.floor(a/100)&&o-1<=Math.floor(n/100)?r+'<a href="javascript:" class="ui-date-prev" data-year="'+(o-1)+'">'+this.svg+"</a>":r+'<span class="ui-date-prev">'+this.svg+"</span>",r=(r=o+1>=Math.floor(a/100)&&o+1<=Math.floor(n/100)?r+'<a href="javascript:" class="ui-date-next" data-year="'+(o+1)+'">'+this.svg+"</a>":r+'<span class="ui-date-next">'+this.svg+"</span>")+'<a href="javascript:" class="ui-date-switch" data-type="year">'+o+"</a>        </div>",r+=i.html;var s=(new Date).toArray().slice(0,2).join("");return r+=s>=a&&s<=n?'<a href="javascript:" class="ui-date-item ui-date-now">今月</a>':'<span class="ui-date-item ui-date-now">今月</span>',r+="</div>",this.el.container.attr("data-type","month").html(r),this},i.prototype["month-range"]=function(){var e=this[t],i=this.el.container.data("date")||e[0];this.el.container.data("date",i);var a=1*i[0]-1,n=1*i[0]+1,r=this._month(i),o=r.max.slice(0,4),s=r.min.slice(0,4),l='<div class="ui-range-x">';return l+='<div class="ui-date-head">            <div class="ui-date-half">',l=a>=s&&a<=o?l+'<a href="javascript:" class="ui-date-prev" data-year="'+a+'">'+this.svg+"</a>":l+'<span class="ui-date-prev">'+this.svg+"</span>",l=l+'<span class="ui-date-switch">'+i[0]+'</span>        </div>        <div class="ui-date-half">',l=n>=s&&n<o?l+'<a href="javascript:" class="ui-date-next" data-year="'+n+'">'+this.svg+"</a>":l+'<span class="ui-date-next">'+this.svg+"</span>",l=l+'<span class="ui-date-switch">'+n+"</span>        </div>",l+="</div>",l=l+'<div class="ui-range-body ui-range-month-body"><div class="ui-date-half">'+r.html+'</div><div class="ui-date-half">'+this._month([n,i[1],i[2]]).html+"</div></div>",l+='<div class="ui-range-footer"><a href="javascript:;" class="ui-button ui-button-primary" data-type="ensure">确定</a><a href="javascript:;" class="ui-button" data-type="cancel">取消</a></div>',l+="</div>",this.el.container.attr("data-type","month-range").html(l),this},i.prototype.year=function(){var i=this[t],a=this.el.input,n=a.attr("min")||this.min,r=a.attr("max")||this.max;n="object"==typeof n&&n.getFullYear?n.getFullYear():"string"==typeof n&&0==/\D/.test(n.replace(e,""))?n.toDate().getFullYear():0,r="object"==typeof r&&r.getFullYear?r.getFullYear():"string"==typeof r&&0==/\D/.test(r.replace(e,""))?r.toDate().getFullYear():9999;var o='<div class="ui-year-x">',s=i[0];o+='<div class="ui-date-head">',o=s-12>=n&&s-12<=r?o+'<a href="javascript:" class="ui-date-prev" data-year="'+(s-12)+'" aria-label="上一个12年">'+this.svg+"</a>":o+'<span class="ui-date-prev">'+this.svg+"</span>",o=(o=(o=s+12>=n&&s+12<=r?o+'<a href="javascript:" class="ui-date-next" data-year="'+(s+12)+'" aria-label="下一个12年">'+this.svg+"</a>":o+'<span class="ui-date-next">'+this.svg+"</span>")+'<span class="ui-date-switch">'+[s-6,s+5].join("-")+"</span></div>")+'<div class="ui-year-body">'+function(){for(var e="",i="",a=s-6;a<s+6;a+=1)i="ui-date-item",a==s&&(i=i+" "+t),e=a>=n&&a<=r?e+'<a href="javascript:" class="'+i+'">'+a+"</a>":e+'<span class="'+i+'">'+a+"</span>";return e}()+"</div>";var l=(new Date).getFullYear();return o+=l>=n&&l<=r?'<a href="javascript:" class="ui-date-item ui-date-now">今年</a>':'<span class="ui-date-item ui-date-now">今年</span>',o+="</div>",o+="</div>",this.el.container.attr("data-type","year").html(o),this},i.prototype.hour=function(){var e=this[t],i=this.el.input,a=1*i.attr("step");a="hour"!=this.type||!a||a<1?1:Math.round(a);var n=(i.attr("min")||this.min.toString()).split(":")[0],r=(i.attr("max")||this.max.toString()).split(":")[0];/\D/.test(n)?n=0:n*=1,/\D/.test(r)?r=24:r*=1;var o='<div class="ui-hour-x">';return o=o+'<div class="ui-hour-body">'+function(){for(var i="",o="",s="",l=0;l<24;l+=a)1==(o=l+"").length&&(o="0"+o),s="ui-date-item",o==e[0]&&(s=s+" "+t),i=o>=n&&o<=r?i+'<a href="javascript:" class="'+s+'">'+o+":00</a>":i+'<span class="'+s+'">'+o+":00</span>";return i}()+"</div>",o+="</div>",this.el.container.attr("data-type","hour").html(o),this},i.prototype.minute=function(){var e=this[t],i=this.el.input,a=1*i.attr("step")||5,n=i.attr("min")||this.min+"",r=i.attr("max")||this.max+"";n="auto"==n||/\D/.test(n.replace(":",""))||2!=n.split(":").length?0:1*n.replace(":",""),r="auto"==r||/\D/.test(r.replace(":",""))||2!=r.split(":").length?2359:1*r.replace(":","");var o='<div class="ui-minute-x">',s=1*e[0];return o+='<div class="ui-date-head">',o=s<=Math.floor(n/100)?o+'<span class="ui-date-prev">'+this.svg+"</span>":o+'<a href="javascript:" class="ui-date-prev" data-hour="'+(s-1)+'">'+this.svg+"</a>",o=s>=Math.floor(r/100)?o+'<span class="ui-date-next">'+this.svg+"</span>":o+'<a href="javascript:" class="ui-date-next" data-hour="'+(s+1)+'">'+this.svg+"</a>",o=o+'<a href="javascript:" class="ui-date-switch" data-type="hour">'+e[0]+":00</a></div>",o=o+'<div class="ui-minute-body">'+function(){for(var i="",o="",s="",l=0;l<60;l+=a)1==(o=l+"").length&&(o="0"+o),s="ui-date-item",1*(e[0]+o)>=n&&1*(e[0]+o)<=r?(o==e[1]&&(s=s+" "+t),i=i+'<a href="javascript:" class="'+s+'">'+[e[0],o].join(":")+"</a>"):i=i+'<span class="'+s+'">'+[e[0],o].join(":")+"</span>";return i}()+"</div>",o+="</div>",this.el.container.attr("data-type","minute").html(o),this},i.prototype.show=function(){var e=this.el.container;return this.format(),"time"==this.type?this.minute():"date-range"==this.type?(this._rangeSelected||(this._rangeSelected=this[t]),this["date-range"]()):"month-range"==this.type?(this._rangeSelected||(this._rangeSelected=this[t]),this["month-range"]()):this[this.type]?this[this.type]():this.date(),0==$.contains($(document.body),e)&&$(document.body).append(e),e.show().follow(this.el.trigger.addClass("active"),{position:"4-1"}),$.isFunction(this.callback.show)&&this.callback.show.call(this,this.el.input,e),this.display=!0,this},i.prototype.hide=function(){return 1==this.display&&(this.el.container.hide(),this.el.trigger.removeClass("active"),this.el.input.focus(),$.isFunction(this.callback.hide)&&this.callback.hide.call(this,this.el.input,this.el.container)),this.display=!1,this},$.fn.dateTime=function(t){return $(this).each(function(){$(this).data("dateTime")||$(this).data("dateTime",new i($(this),t))})},i}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Color=e()}(this,function(require){if("function"==typeof require)require("common/ui/Drop");else if(!$().drop)return window.console&&window.console.error("need Drop.js"),{};var t="background-color";$.hslToHex=function(t,e,i){var a,n,r;if(0==e)a=n=r=i;else{var o=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;a=o(l,s,t+1/3),n=o(l,s,t),r=o(l,s,t-1/3)}var c=[Math.round(255*a),Math.round(255*n),Math.round(255*r)];return $.map(c,function(t){return 1==(t=t.toString(16)).length?"0"+t:t}).join("")},$.hexToHsl=function(t){var e,i,a=parseInt(t.slice(0,2),16)/255,n=parseInt(t.slice(2,4),16)/255,r=parseInt(t.slice(4,6),16)/255,o=Math.max(a,n,r),s=Math.min(a,n,r),l=(o+s)/2;if(o==s)e=i=0;else{var c=o-s;switch(i=l>.5?c/(2-o-s):c/(o+s),o){case a:e=(n-r)/c+(n<r?6:0);break;case n:e=(r-a)/c+2;break;case r:e=(a-n)/c+4}e/=6}return[e,i,l]},$.rgbToHex=function(t){if(!t)return"#000000";var e=[];if(/^#[0-9A-F]{6}$/i.test(t))return t;if(/^#[0-9A-F]{3}$/i.test(t))return(e=t.split(""))[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3];var i=function(t){return("0"+parseInt(t,10).toString(16)).slice(-2)};return 4==(e=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)/i)).length?"#"+i(e[1])+i(e[2])+i(e[3]):"#000000"},$.fn.color=function(t){return $(this).each(function(){$(this).data("color")||$(this).data("color",new e($(this),t))})};var e=function(t,e){var i=this,a={offsets:{x:0,y:0},edgeAdjust:!1,position:"7-5",onShow:$.noop,onHide:$.noop},n=$.extend({},a,e||{});if(t){t.size||(t=$(t));var r=t[0],o=r.id;o||(o="C"+(Math.random()+"").split(".")[1],r.id=o),t.prop("readonly",!0).on("click",function(t){t.preventDefault()});var s=$('<label for="'+o+'"></label>').addClass("ui-color-track"),l=$("<span></span>").addClass("ui-color-thumb");t.before(s.append(l));var c=$("<div></div>").addClass("ui-color-container");return t.drop(c,{eventType:"click",offsets:n.offsets,edgeAdjust:n.edgeAdjust,position:n.position,onShow:function(){if(i.show(),0==n.edgeAdjust){var t=c[0].getBoundingClientRect();t.left<3?c.css("margin-left",-1*t.left+3):t.right-$(window).width()>3&&c.css("margin-left",$(window).width()-t.right-3)}},onHide:function(){i.hide(),c.css("margin-left","0")}}),t.on("focus",function(){window.isKeyEvent&&s.addClass("ui-outline")}).blur(function(){s.removeClass("ui-outline")}),i.drop=t.data("drop"),this.el={input:t,container:c,track:s,thumb:l},this.callback={show:n.onShow,hide:n.onHide},this.value(r.value),this}};return e.prototype.value=function(e){var i=this,a=i.el.input,n=i.el.thumb,r=a.val();return"string"!=typeof e?(r||(r="#000000",a.val(r),n.css(t,r)),r):(e=$.rgbToHex(e),a.val(e),n.css(t,e),i.match(),r&&e!=r&&a.trigger("change"),this)},e.prototype.create=function(){var e=this,i=e.el.container,a='<div class="ui-color-body">'+function(){var e='<div class="ui-color-basic colorBasicX" role="listbox">';return e=e+'<div class="ui-color-basic-l">'+$.map(["0","3","6","9","C","F","F00","018001","0501ff","FF0","0FF","800180"],function(e){return 1==(e=e.toUpperCase()).length?e=e+e+e+e+e+e:3==e.length&&(e=e.replace(/\w/g,function(t){return t+t})),'<a href="javascript:" class="ui-color-lump" data-color="'+e+'" aria-label="'+e+'" style="'+t+":#"+e+'" role="option"></a>'}).join("")+"</div>",(e=e+'<div class="ui-color-basic-r">'+function(){var e=["0","3","6","9","C","F"],i="";return $.each(e,function(a,n){i+='<div class="ui-color-lump-group">',$.each(e,function(a,r){$.each(e,function(e,a){var o=n+n+r+r+a+a;i=i+'<a href="javascript:" class="ui-color-lump" data-color="'+o+'" style="'+t+":#"+o+'" aria-label="'+o+'" role="option"></a>'})}),i+="</div>"}),i}()+"</div>")+"</div>"}()+function(){var t='<div class="ui-color-more colorMoreX">';return(t+='<div class="ui-color-more-l">                <a href="javascript:" class="ui-color-cover-white" aria-label="色域背景块" role="region"></a><div class="ui-color-circle colorCircle"></div>                <svg>                    <defs>                        <linearGradient x1="0" y1="0" x2="1" y2="0" id="colorGradient">                            <stop offset="0%" stop-color="#ff0000"></stop>                            <stop offset="16.66%" stop-color="#ffff00"></stop>                            <stop offset="33.33%" stop-color="#00ff00"></stop>                            <stop offset="50%" stop-color="#00ffff"></stop>                            <stop offset="66.66%" stop-color="#0000ff"></stop>                            <stop offset="83.33%" stop-color="#ff00ff"></stop>                            <stop offset="100%" stop-color="#ff0000"></stop>                        </linearGradient>                    </defs>                    <rect x="0" y="0" width="180" height="100" fill="url(#colorGradient)"></rect>                </svg></div><div class="ui-color-more-r">                    <div class="ui-color-more-fill colorFill">                        <a href="javascript:" class="ui-color-more-cover" aria-label="明度控制背景条" role="region"></a>                        <svg>                        <defs>                            <linearGradient x1="0" y1="0" x2="0" y2="1" id="colorGradient2">                                <stop offset="0%" stop-color="#ffffff"></stop>                                <stop offset="50%" stop-color="rgba(255,255,255,0)"></stop>                                <stop offset="50%" stop-color="rgba(0,0,0,0)"></stop>                                <stop offset="100%" stop-color="#000000"></stop>                            </linearGradient>                        </defs>                        <rect x="0" y="0" width="16" height="100" fill="url(#colorGradient2)"></rect>                    </svg>                    </div>                    <a href="javascript:" class="ui-color-more-arrow colorArrow" role="slider" aria-label="明度控制按钮：100%"></a>                </div>')+"</div>"}()+"</div>";return i.html('<a href="javascript:" class="ui-color-switch" role="button">更多</a><div class="ui-color-current">            <i class="ui-color-current-square colorCurrent"></i>            #<input class="ui-color-current-input">        </div>'+a+'<div class="ui-color-footer">            <a href="javascript:" class="ui-color-btn-cancel">取消</a><a href="javascript:" class="ui-color-btn-ensure">确定</a>        </div>'),$.extend(e.el,{field:i.find("input"),basic:i.find(".colorBasicX"),more:i.find(".colorMoreX"),circle:i.find(".colorCircle"),fill:i.find(".colorFill"),arrow:i.find(".colorArrow"),current:i.find(".colorCurrent")}),e.events(),e},e.prototype.events=function(){var e=this,i=e.el.container,a=e.el.circle,n=e.el.fill,r=e.el.arrow,o=e.el.field;i.on("click","a",function(i){var s=this,l=$(s),c="",d=s.className;if(/cancel/.test(d))e.hide();else if(/ensure/.test(d))(c=o.val())&&e.value("#"+c),e.hide();else if(/lump/.test(d))c=l.attr("data-color"),o.val(c),e.match();else if(/switch/.test(d))"更多"==s.innerHTML?(e.el.more.show(),e.el.basic.hide(),s.innerHTML="基本"):(e.el.more.hide(),e.el.basic.show(),s.innerHTML="更多"),e.match();else if(/cover/.test(d)){var h,u,p=s.getBoundingClientRect(),f=i.pageX-p.left,v=i.pageY-$(document).scrollTop()-p.top,g=s.clientWidth,m=s.clientHeight;if(a.length&&n.length&&r.length){if(1==/white/.test(d)){h=f/g,u=1-v/m,a.css({left:f,top:v});var y="hsl("+[360*h,100*u+"%","50%"].join()+")";a.css(t,y)}else r.css("top",v);o.val(e._getHSL().replace("#","")),e.match()}}});var s=e.el.field;if(s.on("input",function(){var t=this.value;/^[0-9A-F]{6}$/i.test(t)?e.match():/^[0-9A-F]{3}$/i.test(t)&&e.match($.rgbToHex("#"+t).replace("#",""))}).on("keyup",function(t){if(13==t.keyCode){var i=o.val(),a=i;i&&((i=$.rgbToHex("#"+i))!=a&&o.val(i),e.value("#"+i)),e.hide()}}),[].map){var l={};r.on("mousedown",function(t){l.pageY=t.pageY,l.top=1*r.css("top").replace("px",""),t.preventDefault()}),document.addEventListener("mousemove",function(t){if("number"==typeof l.top){var i=l.top+(t.pageY-l.pageY),a=r.parent().height();i<0?i=0:i>a&&(i=a),r.css("top",i),o.val(e._getHSL().replace("#","")),e.match(!1)}}),document.addEventListener("mouseup",function(){l.top=null}),n.parent().find("a").on("keydown",function(t){if(38==t.keyCode||40==t.keyCode){t.preventDefault();var i=1*r.css("top").replace("px",""),a=n.height();38==t.keyCode?--i<0&&(i=0):++i>a&&(i=a);var s=r.attr("aria-label");r.css("top",i).attr("aria-label",s.replace(/\d+/,Math.round(100*i/a))),o.val(e._getHSL().replace("#","")),e.match(!1)}}),a.parent().find("a").on("keydown",function(i){var n=$(this);if(i.keyCode>=37&&i.keyCode<=40){i.preventDefault();var r=1*a.css("top").replace("px",""),s=1*a.css("left").replace("px",""),l=n.height(),c=n.width();38==i.keyCode?--r<0&&(r=0):40==i.keyCode?++r>l&&(r=l):37==i.keyCode?--s<0&&(s=0):39==i.keyCode&&++s>c&&(s=c);var d=s/c,h=1-r/l;a.css({left:s,top:r});var u="hsl("+[360*d,100*h+"%","50%"].join()+")";a.css(t,u),o.val(e._getHSL().replace("#","")),e.match()}})}else s[0].attachEvent("onpropertychange",function(t){(t=t||window.event)&&"value"==t.propertyName&&s.trigger("input")});return e},e.prototype._getHSL=function(){var t=this,e=t.el.circle,i=t.el.arrow;if(e.length*i.length==0)return t;var a,n,r;return a=e[0].style.left?e.css("left").replace("px","")/e.parent().width():0,n=e[0].style.top?1-e.css("top").replace("px","")/e.parent().height():1,r=i[0].style.top?1-i.css("top").replace("px","")/i.parent().height():0,"#"+$.hslToHex(a,n,r)},e.prototype.match=function(e){var i=this;if(1!=i.display)return this;var a,n,r,o=i.el.container,s=i.el.current,l=i.el.field,c=!0;if(!1===e&&(c=e),""==(e=e||l.val())&&(e=$.rgbToHex(s.css(t)).replace("#",""),l.val(e)),e=e.replace("#",""),s.css(t,"#"+e),"none"==i.el.more.css("display"))o.find(".active").removeClass("active"),o.find('a[data-color="'+e.toUpperCase()+'"]').addClass("active");else{a=i.el.circle,n=i.el.fill,r=i.el.arrow;var d=$.hexToHsl(e),h=d[0],u=d[1],p=d[2],f="hsl("+[360*h,100*u+"%","50%"].join()+")";"000000"!=e&&(a.css(t,f),n.css(t,f)),1==c&&(0!=p&&a.css({left:a.parent().width()*h,top:a.parent().height()*(1-u)}),r.css("top",r.parent().height()*(1-p)))}return this},e.prototype.show=function(){var e=this,i=e.el.container;""==i.html()&&e.create(),0==e.drop.display&&e.drop.show(),e.display=e.drop.display;var a=e.el.current;return a.attr("style")||a.css(t,e.el.input.val()),e.match(),$.isFunction(this.callback.show)&&this.callback.show.call(this,this.el.track,i),this},e.prototype.hide=function(){var t=this;return 1==t.drop.display&&t.drop.hide(),t.display=t.drop.display,t.el.input.focus(),$.isFunction(this.callback.hide)&&this.callback.hide.call(this,this.el.trigger,this.el.container),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Range=e()}(this,function(require){if("function"==typeof require)require("common/ui/Tips");else if(!$().tips)return window.console&&window.console.error("need Tips.js"),{};var t="ui-range";$.fn.range=function(t){return $(this).each(function(){$(this).data("range")||$(this).data("range",new e($(this),t))})};var e=function(e,i){var a=this,n={reverse:!1,tips:function(t){return t}},r=$.extend({},n,i||{}),o=e.attr("min")||0,s=e.attr("max")||100,l=e.attr("step")||1,c=$("<div></div>").attr("class",e.attr("class")).addClass(t),d=$("<div></div>").addClass("ui-range-track"),h=$("<a></a>").addClass("ui-range-thumb").attr({href:"javascript:","aria-valuenow":e.val(),"aria-valuemax":s,"aria-valuemin":o,role:"slider",draggable:"false"});e.before(c),0==c.width()&&c.width(e.width()),d.append(h),c.append(d),c.click(function(t){var i=t&&t.target;if(i&&i!=h.get(0)){var n=t.clientX-(h.offset().left-$(window).scrollLeft())-h.width()/2;a.value(1*e.val()+(s-o)*n/$(this).width())}}),h.on("keydown",function(t){var i=1*e.val();37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),37==t.keyCode?i=Math.max(o,i-l):39==t.keyCode&&(i=Math.min(s,i+1*l)),a.value(i))});var u={};return h.mousedown(function(t){u.x=t.clientX,u.value=1*e.val(),$.isFunction(r.tips)&&(a.tips?a.tips.show(r.tips.call(e,u.value)):(h.tips({eventType:"null",content:r.tips(u.value)}),a.tips=h.data("tips"))),$(this).addClass("active")}),r.reverse&&h.addClass("reverse"),$(document).mousemove(function(t){if("number"==typeof u.x){var i=t.clientX-u.x;a.value(u.value+(s-o)*i/c.width()),a.tips&&a.tips.show(r.tips.call(e,e.val())),t.preventDefault()}}),$(document).mouseup(function(){u.x=null,u.value=null,h.removeClass("active"),a.tips&&a.tips.hide()}),this.num={min:+o,max:+s,step:+l},this.el={input:e,container:c,track:d,thumb:h},this.obj={},this.value(),this};return e.prototype.value=function(t){var e=this.el.input,i=e.val(),a=this.num.max,n=this.num.min,r=this.num.step;return t||0===t||(i=t,t=$.trim(e.val())),t=t>a||a-t<r/2?a:""==t||t<n||t-n<r/2?n:n+Math.round((t-n)/r)*r,e.val(t),this.position(),t!=i&&e.trigger("change"),this},e.prototype.position=function(){var t=this.el.input.val(),e=this.num.max,i=this.num.min;return this.el.track.css("borderLeftWidth",this.el.container.width()*(t-i)/(e-i)),this.el.thumb.attr("aria-valuenow",t),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Placeholder=e()}(this,function(){$.fn.placeholder=function(){return $(this).each(function(){var e=$(this).data("placeholder");e?e.visibility():new t($(this))})};var t=function(e){if("function"==typeof history.pushState)return this;if(!e)return e=$("[placeholder]").placeholder(),this;var i=this;this.el={},this.el.target=e;var a=e.attr("placeholder"),n=e.attr("id");if(!a||e.data("placeholder"))return this;n||(n="placeholder"+(Math.random()+"").replace(".",""),e.attr("id",n));var r=$('<label class="ui-placeholder" for='+n+">"+a+"</label>").hide();0==(0==e.is(":visible"))?("block"!=e.css("display")?r.insertAfter(e):$('<div aria-hidden="true"></div>').append(r).insertAfter(e),window.addEventListener?e.on("input",function(){i.visibility()}):e.get(0).attachEvent("onpropertychange",function(t){t&&"value"==t.propertyName&&i.visibility()}),e.data("placeholder",i),this.el.placeholder=r,this.visibility()):($(document.body).click(function(){e.is(":visible")&&!e.data("placeholder")&&(i=new t(e)),e.data("placeholder")&&i.visibility()}),setTimeout(function(){i.visibility()},200))};return t.prototype.position=function(){var t=this.el.target,e=this.el.placeholder,i=parseInt(t.css("marginTop"))||0,a=parseInt(t.css("marginRight"))||0,n=parseInt(t.css("marginBottom"))||0,r=parseInt(t.css("marginLeft"))||0,o=t.width(),s=t.outerWidth(),l=t.outerHeight();return e.parent().attr("aria-hidden")?e.css({width:o,marginLeft:r,marginTop:-1*(l+n)}):e.css({width:o,marginTop:i,marginLeft:-1*(s+a)}),this},t.prototype.visibility=function(){var t=this.el.target;return 0==t.is(":visible")||$.trim(t.val())?this.hide():this.show(),this},t.prototype.show=function(){return this.el.placeholder&&(this.el.placeholder.html(this.el.target.attr("placeholder")).show(),this.position()),this},t.prototype.hide=function(){return this.el.placeholder&&this.el.placeholder.hide(),this},t}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):e()}(0,function(require){"function"==typeof require&&require("common/ui/Enhance");if($.fn.propMatch=function(){if(!window.addEventListener){var t=function(t){(t=$(t)).prop("checked")?t.attr("checked","checked"):t.removeAttr("checked"),t.parent().addClass("z").toggleClass("i_i")};if(1==$(this).length&&"radio"==$(this).attr("type")){var e=$(this).attr("name");$("input[type=radio][name="+e+"]").each(function(){t(this)})}else $(this).each(function(){t(this)});return $(this)}},!window.addEventListener&&!window.initedRadio){$(document.body).on("click","input[type=radio]",function(){$(this).propMatch()}),$("input[type=radio]").propMatch(),window.initedRadio=!0}}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):e()}(0,function(require){var t=window;if("function"==typeof require?require("common/ui/Radio"):!$().propMatch&&t.console&&t.console.error("need Radio.js"),!t.addEventListener&&!t.initedCheckbox&&$().propMatch){$(document.body).on("click","input[type=checkbox]",function(){$(this).propMatch()}),$("input[type=checkbox]").propMatch(),t.initedCheckbox=!0}}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Validate=e()}(this,function(require){if("function"==typeof require)require("common/ui/ErrorTip");else if(!$().follow)return window.console&&window.console.error("need ErrorTip.js"),{};$.fn.validate=function(e,i){return $(this).each(function(){$(this).data("validate",new t($(this),e,i))})},$.fn.selectRange=function(t,e){var i=$(this).get(0);if(i.createTextRange){var a=i.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",t),a.select()}else i.focus(),i.setSelectionRange(t,e);return $(this)},$.fn.isProp=function(t){var e=$(this).prop(t)||$(this).attr(t);return!(!e&&"string"!=typeof e)},$.dbc2sbc=function(t){var e,i,a="";for(e=0;e<t.length;e++)a+=(i=t.charCodeAt(e))>=65281&&i<=65373?String.fromCharCode(t.charCodeAt(e)-65248):12288==i?String.fromCharCode(t.charCodeAt(e)-12288+32):t.charAt(e);return a},$.getType=function(t){var e=t.getAttribute("type"),i=e||t.type||"";if(i=i.toLowerCase().replace(/\W+$/,""),e&&e!=i&&$('<input type="'+i+'">').attr("type")==i)try{t.type=i}catch(a){}return i.replace(/_/g,"")},$.getLength=function(t,e){if("password"==t.type)return e||t.value.length;var i=t.getAttribute("lang"),a=$.trim(t.value);if(!i)return e||a.length;if(""==a)return 0;var n=1,r=1;if(/zh/i.test(i)?r=.5:/en/i.test(i)&&(n=2),!e){var o=a.replace(/[\x00-\xff]/g,"").length,s=a.length-o;return Math.ceil(s*r)+Math.ceil(o*n)}var l=0,c=e;return $.each(a.split(""),function(t,i){l>=e||(/[\x00-\xff]/.test(i)?l+=r:l+=n,l>=e&&(c=t+1))}),c},$.telFilter=function(t){return t=t||"",(t=t.replace("+86","")).match(/\d/)&&11==t.match(/\d/g).length&&(t=t.replace(/\D/g,"")),t},$.validate={reg:{email:"^[a-z0-9._%-]+@([a-z0-9-]+\\.)+[a-z]{2,4}$",number:"^\\-?\\d+(\\.\\d+)?$",url:"^(http|https)\\:\\/\\/[a-z0-9\\-\\.]+\\.[a-z]{2,3}(:[a-z0-9]*)?\\/?([a-z0-9\\-\\._\\:\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$",tel:"^1\\d{10}$",zipcode:"^\\d{6}$",date:"^\\d{4}\\-(0\\d|1[0-2])\\-([0-2]\\d|3[0-1])$",time:"^[0-2]\\d\\:[0-5]\\d$",hour:"^[0-2]\\d\\:00$",minute:"^[0-2]\\d\\:[0-5]\\d$","date-range":"^\\d{4}(\\-\\d{2}){2}\\s至\\s\\d{4}(\\-\\d{2}){2}$","month-range":"^\\d{4}\\-\\d{2}\\s至\\s\\d{4}\\-\\d{2}$"},prompt:function(t,e,i){var a={name:$.extend({},{email:"邮箱",tel:"手机号码",url:"网址",zipcode:"邮编",password:"密码",number:"数值",range:"数值",date:"日期",year:"年份",month:"月份",hour:"小时",minute:"分钟",time:"时间",datetime:"日期时间","date-range":"日期范围","month-range":"月份范围"},$.validate.name||{}),ignore:{radio:"请选择一个选项",checkbox:"如果要继续，请选中此框",select:"请选择列表中的一项","select-one":"请选择列表中的一项",empty:"请填写此字段"},unmatch:{pattern:"内容格式不符合要求",multiple:"某项内容格式不符合要求"},out:{min:"值偏小",max:"值偏大",step:"值不符合要求"},overflow:{minlength:"内容长度偏小",maxlength:"内容长度偏大"}};if(t){var n="",r=e.id,o="",s=t.error;e&&(o=e.getAttribute("type")||e.type||"","select-one"==(o=$.trim(o))&&(o="select"));var l=(i=i||{}).prompt||i;r&&$.isArray(i)&&$.each(i,function(t,e){e.id==r&&(l=e.prompt)});var c=a.name[o]||function(){if(i.label&&r&&!/checkbox|radio/.test(o)){var t="";return $("label[for="+r+"]").each(function(){var e=$(this).clone();e.children().remove();var i=$.trim(e.html()).replace(/\d/g,"").replace("：","");i.length>t.length&&(t=i)}),t.length>=2?t:void 0}}();switch(t.type){case"ignore":(n=l.ignore)||(n=(n=o&&c?"select"!=o?c+"不能为空":a.ignore[o]="您尚未选择"+c:a.ignore[s])||a.ignore.empty);break;case"unmatch":(n=l.unmatch)||(n=(n=o&&c?c+"格式不符合要求":a.unmatch[s]||a.unmatch.pattern)||a.ignore.empty);break;case"out":if(!(n=l.out&&l.out[s]))if(o&&c){var d=e.getAttribute("min"),h=e.getAttribute("max"),u=1*e.getAttribute("step")||1;"month-range"==o&&(d=d.slice(0,7),h=h.slice(0,7));var p="必须要大于或等于"+d,f="必须要小于或等于"+h;"min"==s?(n=c+p,"-range"==o.slice(-6)&&(n="起始日期"+p)):"max"==s?(n=c+"必须要小于或等于"+h,"-range"==o.slice(-6)&&(n="结束日期"+f)):"min-max"==s?n="起始日期"+p+"，结束日期"+f:"step"==s&&(n="number"==o||"range"==o?"请输入有效的值。两个最接近的有效值是"+function(){d*=1,h*=1;for(var t=1*$.trim(e.value),i=d,a=d;a<h;a+=u)if(a<t&&a+u>t){i=a;break}return[i,i+u].join("和")}():"请选择有效的值。"+c+"间隔是"+u)}else n=a.out[s];n=n||a.out.step;break;case"overflow":if(!(n=l.overflow&&l.overflow[s])){var v=e.getAttribute("minlength"),g=e.maxlength||e.getAttribute("maxlength"),m=e.getAttribute("lang"),y="";/zh/i.test(m)?y="个汉字(2字母=1汉字)":/en/i.test(m)&&(y="个字符(1汉字=2字符)"),"minlength"==s?n="内容长度不能小于"+v+y:"maxlength"==s&&(n="内容长度不能大于"+g.replace(/\D/g,"")+y)}n=n||a.overflow[s]}return $.isFunction(n)&&(n=n.call(e,$(e))),n}},isIgnore:function(t){if(!t||t.disabled)return!1;var e=$.getType(t),i=$(t),a=t.value;if(i.isProp("required")){if("radio"==e){var n=self,r=i.parents("form");t.name&&r.length&&(n=r.find("input[type='radio'][name='"+t.name+"']"));var o=!1;return n.each(function(){0==o&&$(this).prop("checked")&&(o=!0)}),0==o&&{type:"ignore",error:"radio"}}if("checkbox"==e)return 0==i.prop("checked")&&{type:"ignore",error:"checkbox"};if(/select/.test(e)&&""==a)return{type:"ignore",error:"select"};if("password"!=e&&(a=$.trim(a)),""==a)return history.pushState&&(t.value=""),{type:"ignore",error:"empty"}}return!1},isUnmatch:function(t,e,i){if(!t||t.disabled)return!1;var a=$(t),n=t.value,r=n,o=$.getType(t);if(/^radio|checkbox|select$/i.test(o))return!1;if("password"!=o&&(r=$.trim(n)),0==/^text|textarea|password$/i.test(o)&&(r=$.dbc2sbc(r)),"tel"==o&&(r=$.telFilter(r)),!1!==$.validate.focusable&&0!==$.validate.focusable&&r!=n&&(t.value=r),""==r)return!1;if(!(e=e||a.attr("pattern")||o&&$.map(o.split("|"),function(t){var e=$.validate.reg[t];if(e)return e}).join("|")))return!1;var s=a.isProp("multiple"),l=new RegExp(e,i||"i");if(s&&0==/^number|range$/i.test(o)){var c=!0;if($.each(r.split(","),function(t,e){e=$.trim(e),c&&!l.test(e)&&(c=!1)}),0==c)return{type:"unmatch",error:"multiple"}}else if(0==l.test(r))return{type:"unmatch",error:"pattern"};return!1},isOut:function(t){if(!t||t.disabled||/^radio|checkbox|select$/i.test(t.type))return!1;var e=$(t),i=e.attr("min"),a=e.attr("max"),n=Number($(t).attr("step"))||1,r=$.getType(t),o=t.value;if("-range"!=r.slice(-6)){if("0"!=o&&Number(o)!=o||(o*=1),i&&o<i)return{type:"out",error:"min"};if(a&&o>a)return{type:"out",error:"max"};if(("number"==r||"range"==r)&&n&&i&&!/^\d+$/.test(Math.abs(o-i)/n))return{type:"out",error:"step"};if(("hour"==r||"minute"==r||"time"==r)&&i&&n){var s=o.split(":")[1],l=i.split(":")[1];if("hour"==r&&(s!=l||(o.split(":")[0]-i.split(":")[0])%n!=0))return{type:"out",error:"step"};if((s-l)%n!=0)return{type:"out",error:"step"}}}else{var c=o.split(" "),d=[];if("month-range"==r&&(i=i&&i.slice(0,7),a=a&&a.slice(0,7)),3==c.length&&(i&&c[0]<i&&d.push("min"),a&&c[2]>a&&d.push("max"),d.length))return{type:"out",error:d.join("-")}}return!1},isOverflow:function(t){if(!t||t.disabled||/^radio|checkbox|select$/i.test(t.type))return!1;var e=$(t),i=e.attr("minlength"),a=t.maxlength||e.attr("maxlength");if(""==t.value)return!1;var n=$.getLength(t);return i&&n<i?{type:"overflow",error:"minlength"}:!!(a&&(a=a.replace(/\D/g,""),n>a))&&{type:"overflow",error:"maxlength"}},isError:function(t){if(!t||t.disabled)return!1;var e=t.getAttribute("type")||t.type,i=t.tagName.toLowerCase();return 1!=/^button|submit|reset|file|image$/.test(e)&&"button"!=i&&($.validate.isIgnore(t)||$.validate.isUnmatch(t)||$.validate.isOut(t)||$.validate.isOverflow(t)||!1)},isAllPass:function(t,e){if(!t)return!0;(t=$(t)).is("form")&&(t=t.find(":input"));var i=!0;return t.each(function(){var t=this,a=t.getAttribute("type")||t.type,n=t.getAttribute("pattern");if(!n&&a&&(n=$.validate.reg[a])&&t.setAttribute("pattern",n),0!=i&&!t.disabled&&"submit"!=a&&"reset"!=a&&"file"!=a&&"image"!=a){var r=$.validate.isError(t);r&&!1!==e&&($.validate.errorTip(t,$.validate.prompt(r,t,e)),i=!1)}}),i},count:function(t){if(!t)return this;var e;t.get?e=t.get(0):(e=t,t=$(t));var i=e.tagName.toLowerCase();if("input"!=i&&"textarea"!=i)return this;var a=t.attr("minlength")||0,n=e.maxlength||t.attr("maxlength");if(!a&&!n)return this;n=n.replace(/\D/g,"");var r,o,s="ui-"+i,l=s+"-x",c=s+"-count";if(t.hasClass(s))return this;if(0==t.parent("."+l).length)return this;var d=e.id;d||(d="id"+(Math.random()+"").replace(/\D/g,""),e.id=d),0==(r=t.parent().find("."+c)).length?(r=$('<label for="'+d+'" class="ui-'+i+'-count">                    <span>'+a+"</span>/<span>"+n+"</span>                </label>"),t.parent().append(r)):r.attr("for",d),o=r.find("span").eq(0);var h=function(){var t=$.getLength(e);o.html(t),t>n?o.addClass("red"):o.removeClass("red")};return t.data("countBind")||("oninput"in document.createElement("div")?t.bind("input",function(){h()}):e.attachEvent("onpropertychange",function(t){t&&"value"==t.propertyName&&h()}),t.data("countBind",!0)),h(),this},errorTip:function(t,e){var i=$.validate.getTarget(t);if(0==i.length)return this;var a=function(){if(i.errorTip(e,{onShow:function(t){.5*(t.width()-i.width())<0?t.css("margin-left",.5*(t.width()-i.width())):t.css("margin-left",0),!1===$.validate.focusable?t.addClass("none"):t.removeClass("none")},onHide:function(){if(i.parents("form").data("immediate")){var t=$.validate.el.control.data("customValidate"),e=t&&t($.validate.el.control);($.validate.isError($.validate.el.control.get(0))||"string"==typeof e&&e.length)&&$.validate.el.target.addClass("error"),i.removeAttr("aria-label")}}}),!1!==$.validate.focusable&&0!==$.validate.focusable){$.validate.focusable=null;var t=$.validate.el.control,a=t.get(0);if(a.getAttribute("type")||a.type)if(-1!=e.indexOf("内容长度")&&-1!=e.indexOf("大")){var n=t.val().length,r=a.maxlength||t.attr("maxlength").replace(/\D/g,"");n&&r&&t.selectRange($.getLength(a,r),n)}else t.select()}};$.validate.el={control:$(t),target:i};var n=i.get(0).getBoundingClientRect();return n.top<50?$("html, body").animate({"scrollTop":$(window).scrollTop()-(50-n.top)},200,a):n.bottom>$(window).height()?$("html, body").animate({"scrollTop":$(window).scrollTop()+(n.bottom-$(window).height())},200,a):a(),this},getTarget:function(t){var e=t;if(!t)return $();if(t.get?e=t.get(0):t=$(t),0!=t.length){var i=t,a=e.getAttribute("type")||e.type,n=e.id,r=e.tagName.toLowerCase();return"radio"==a?i=t.parent().find("label.ui-radio[for="+n+"]"):"checkbox"==a?i=t.parent().find("label.ui-checkbox[for="+n+"]"):"select"==a||"select"==r?i=t.next(".ui-select"):"range"==a?i=t.prev(".ui-range"):"hidden"==a||"none"==t.css("display")?t.data("target")&&t.data("target").size&&(i=$.validate.getTarget(t.data("target"))):"textarea"==a||"textarea"==r?t.nextAll(".ui-textarea").length?i=t.nextAll(".ui-textarea").eq(0):!document.querySelector&&t.parent(".ui-textarea").length&&(i=t.parent(".ui-textarea")):"input"==r&&(t.nextAll(".ui-input").length?i=t.nextAll(".ui-input").eq(0):!document.querySelector&&t.parent(".ui-input").length&&(i=t.parent(".ui-input"))),i}}};var t=function(t,e,i){t.eq||(t=$()),e=e||$.noop,t.attr("novalidate","novalidate");var a={multiple:!0,immediate:!0,label:!1,validate:[],onError:$.noop,onSuccess:$.noop},n=$.extend({},a,i||{});t.find(":disabled").each(function(){/^image|submit$/i.test(this.type)&&$(this).removeAttr("disabled")});var r=this;return t.on("submit",function(t){if(!r.stopValidate)return t.preventDefault(),r.isAllPass()&&$.isFunction(e)&&e.call(this,r),!1}),this.el={form:t},this.callback={error:n.onError,success:n.onSuccess},this.data=n.validate,this.boo={multiple:n.multiple,immediate:n.immediate,label:n.label},this.count(),this.enhance(),this};return t.prototype.count=function(){var t=this;return this.el.form.find(".ui-input-x > input, .ui-textarea-x > textarea").each(function(){var t=this,e=$(t),i=e.attr("maxlength");if(i)try{e.attr("maxlength","_"+i+"_")}catch(a){e.removeAttr("maxlength")[0].maxlength=i}$.validate.count(e)}),t},t.prototype.enhance=function(){this.el.form.find(":input").each(function(){var t=this,e=t.getAttribute("type");t.addEventListener&&0==/^checkbox|radio|range$/i.test(e)&&t.addEventListener("paste",function(e){var i=this.getAttribute("type")||this.type,a=e.clipboardData||window.clipboardData,n="";if(a&&1!=t.disabled){var r="";window.getSelection?r=this.value.slice(t.selectionStart,t.selectionEnd):document.selection&&(r=document.selection.createRange().text),""!=this.value.trim()&&r!==this.value||(e.preventDefault(),e.stopPropagation(),n=a.getData("text")||"","password"!=i&&(n=n.trim()),"email"==i?n=n.replace("#","@"):"tel"==i&&(n=$.telFilter(n)),this.value=n),$(t).trigger("input")}})})},t.prototype.immediate=function(){var t=this,e=this.el.form;return e.data("immediate")?this:(e.find(":input").each(function(){var e=this,i=$(e),a=e.type,n=e.getAttribute("type");"button"!=a&&"submit"!=a&&"reset"!=a&&"file"!=a&&"image"!=a&&("radio"==a||"checkbox"==a?i.on("click",function(){0!=t.boo.immediate&&t.isPass($(this))&&t.isError($(this),!1)}):/select/.test(a)||/range|date|time|hour|minute|hidden/.test(n)?i.on("change",function(){0!=t.boo.immediate&&t.isPass($(this))&&t.isError($(this),!1)}):(i.on({focus:function(){t.boo.immediate&&setTimeout(function(){$.validate.focusable=0,t.isPass(i)&&t.isError(i,!1)},20)},input:function(){0!=t.boo.immediate&&(document.msHidden==undefined||""!=this.value||this.lastvalue||!$(this).attr("placeholder")?($.validate.focusable=!1,t.isPass($(this))&&(t.isError($(this),!1),window.errorTip&&window.errorTip.hide()),this.lastvalue=this.value):this.lastvalue=this.value)}}),"oninput"in document.createElement("div")==0&&e.attachEvent("onpropertychange",function(i){i&&"value"==i.propertyName&&t.boo.immediate&&($.validate.focusable=!1,t.isPass($(e))&&t.isError($(e),!1),$.validate.focusable=!0)})))}),e.data("immediate",!0),this)},t.prototype.isError=function(t,e){if(!t||!t.get||!t.length)return this;var i=t.get(0),a=e;if(void 0===e&&0==t.is(":disabled")){var n=t.data("customValidate");a=$.validate.isError(i)||n&&n(t)}var r=$.validate.getTarget(t);return a?r.addClass("error"):"radio"==i.type&&i.name?this.el.form.find('input[type=radio][name="'+i.name+'"]').each(function(){$.validate.getTarget($(this)).removeClass("error").removeAttr("aria-label")}):r.removeClass("error").removeAttr("aria-label"),a},t.prototype.isPass=function(t){if(!t||!t.get||!t.length)return this;var e=t.get(0),i=e.id,a=this.boo.label,n={label:a};i&&this.data&&this.data.length&&$.each(this.data,function(t,e){e.id==i&&("undefined"!=typeof e.label&&(e.label=a),n=e)});var r=$.validate.isAllPass(t,n);if(1==r&&n&&n.method){var o=n.method.call(e,t);"string"==typeof o&&""!==o&&(this.errorTip(t,o),r=!1),t.data("customValidate",n.method)}return this.callback[r?"success":"error"].call(this,t),r},t.prototype.isAllPass=function(){var t=this,e=this.el.form,i=!0;return $.validate.focusable=!0,e.find(":input").each(function(){if(1==i&&0==t.isPass($(this))&&(i=!1),t.boo.multiple){var a=this;e.data("immediate")||$.each(t.data,function(t,e){e.id==a.id&&e.method&&$(a).data("customValidate",e.method)}),t.isError($(this))}}),!e.data("immediate")&&t.boo.immediate&&t.immediate(),i},t.prototype.errorTip=function(t,e){return $.validate.errorTip(t,e),this},t}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Pagination=e()}(this,function(){$.fn.pagination=function(e){return $(this).each(function(){$(this).data("pagination")||$(this).data("pagination",new t($(this),e))})};var t=function(t,e){t=t||$(),e=e||{};var i=this,a={length:0,current:1,every:15,mode:"long",onClick:$.noop},n=$.extend({},a,e),r={};this.el=r,r.container=t;var o={};return this.num=o,o.length=n.length,o.current=n.current,o.every=n.every,this.mode=n.mode,this.href=n.href,t.delegate("a","click",function(e){var a=$(this).attr("data-page");i.num.current=1*a;var r,o=this.className;i.show();var s=(r=/prev/.test(o)?t.find(".ui-page-prev"):/next/.test(o)?t.find(".ui-page-next"):t.find(".ui-page-current"))[0];s&&(s.focus(),!1===window.isKeyEvent&&s.blur()),n.onClick.call(s,i,a),/^javascript/.test(this.href)&&e.preventDefault()}),this.show(),this},e='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><path d="M85.876,100.5l49.537-50.526c4.089-4.215,4.089-11.049,0-15.262 c-4.089-4.218-10.719-4.218-14.808,0L63.586,92.868c-4.089,4.215-4.089,11.049,0,15.264l57.018,58.156 c4.089,4.215,10.719,4.215,14.808,0c4.089-4.215,4.089-11.049,0-15.262L85.876,100.5z"/></svg>';return t.prototype.create=function(t,i){var a=(t=t||{}).length||0,n=t.current||1,r=t.every||1;i=i||"long";var o=this.href||"javascript:",s=function(t){return"string"==typeof o?o:"function"==typeof o?o(t):void 0},l="ui-page",c=Math.ceil(a/r)||1,d="",h=[l,"ui-page-prev"].join(" "),u=[l,"ui-page-next"].join(" "),p=[l,"ui-page-ellipsis"].join(" "),f=[l,"ui-page-text"].join(" "),v=[l,"ui-page-current"].join(" ");d=n>1?d+'<a href="'+s(n-1)+'" class="'+h+'" data-page="'+(n-1)+'" aria-label="上一页，当前第'+n+'页">'+e+"</a>":d+'<span class="'+h+'">'+e+"</span>";if("long"==i){var g=function(t){d=t==n?d+'<span class="'+v+'" aria-label="第'+t+"页，共"+c+'页" aria-selected="true" role="option">'+t+"</span>":d+'<a href="'+s(t)+'" class="'+l+'" data-page="'+t+'" aria-label="第'+t+"页，共"+c+'页">'+t+"</a>"};if(c<=6)for(var m=1;m<=c;m++)g(m);else if(n<.5*c&&n<5){if(n<5)for(m=1;m<6;m++)g(m);d=d+'<span class="'+p+'">...</span>',g(c)}else if(n>.5*c&&n>c-6+2)for(g(1),d=d+'<span class="'+p+'">...</span>',m=c-6+2;m<=c;m++)g(m);else g(1),d=d+'<span class="'+p+'">...</span>',g(n-1),g(n),g(n+1),d=d+'<span class="'+p+'">...</span>',g(c)}else"short"==i&&(d=d+'<span class="'+f+'" aria-label="第'+n+"页，共"+c+'页" role="option">'+[n,c].join("/")+"</span>");return'<div class="ui-page-x">'+(d=n<c?d+'<a href="'+s(n+1)+'" class="'+u+'" data-page="'+(n+1)+'" aria-label="下一页，当前第'+n+'页">'+e+"</a>":d+'<span class="'+u+'">'+e+"</span>")+"</div>"},t.prototype.show=function(){var t=this.num;t.length=Math.max(t.length,0),t.every=Math.max(t.every,1);var e=Math.ceil(t.length/t.every);return t.current>e&&(t.current=e),t.current=Math.max(t.current,1),this.el&&this.el.container&&this.el.container.length&&this.el.container.html(this.create(t,this.mode)),this},t}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Form=e()}(this,function(require){if("function"==typeof require){require("common/ui/LightTip"),require("common/ui/Loading");var t=require("common/ui/Validate");require("common/ui/Select"),require("common/ui/Radio"),require("common/ui/Checkbox"),require("common/ui/Placeholder")}else{if(!$().validate)return window.console&&window.console.error("need Validate.js"),{};if(!$.lightTip)return window.console&&window.console.error("need LightTip.js"),{};if(!$().loading)return window.console&&window.console.error("need Loading.js"),{}}t=t||window.Validate;var e=function(e,i,a){if(!e||!e.length)return this;i=i||$.noop,$.isFunction(i)&&(i={success:i}),a=a||{};var n=this,r=e,o=r.find("[type=submit]"),s=$("label[for="+o.attr("id")+"]");return 0==s.length&&(s=o),$().placeholder&&r.find("[placeholder]").placeholder(),r.find("select").each(function(){$(this).data("select")||$(this).selectMatch()}),this.el={form:e,submit:o,button:s},this.option={callback:i,validate:a},this.validate=new t(r,function(){i.avoidSend&&i.avoidSend()||n.ajax()},a),this};return e.prototype.ajax=function(){var t=this.option.callback,e=this.el.form,i=this.el.button,a=this.el.submit;i.loading(),a.attr("disabled","disabled"),$.ajax({url:e.attr("action"),data:e.serialize(),type:e.attr("method"),dataType:"json",success:function(i){0==i.code||0==i.error?t.success.call(e,i):($.lightTip.error(i.msg||"您的操作没有成功，你可以稍后重试。"),$.isFunction(t.error)&&t.error.apply(e,i))},error:function(){$.lightTip.error("网络异常，刚才的操作没有成功，您可以稍后重试。"),$.isFunction(t.error)&&t.error.apply(e,arguments)},complete:function(){i.unloading(),a.removeAttr("disabled"),$.isFunction(t.complete)&&t.complete.apply(e,arguments)}})},e.prototype.submit=function(){return this.el.form.trigger("submit"),this},e}),function(t,e){"function"==typeof define&&(define.amd||define.cmd)?define(e):t.Table=e()}(this,function(require){if("function"==typeof require){require("common/ui/Checkbox");var t=require("common/ui/DropList"),e=require("common/ui/Pagination");require("common/ui/Tips"),require("common/ui/Loading")}else{if(!$().dropList)return window.console&&window.console.error("need DropList.js"),{};if(!$().pagination)return window.console&&window.console.error("need Pagination.js"),{};if(!$().loading)return window.console&&window.console.error("need Loading.js"),{}}t=t||window.DropList,e=e||window.Pagination;var i="[type=checkbox]",a={container:"table-x",size:"table-size",empty:"table-null-x",error:"table-error-x",loading:"ui-loading",total:"table-num-length",every:"table-num-every",data:"table-page-data",page:"table-page"},n=function(e,n){if(!e||!e.length)return this;var r,o,s,l,c,d,h,u,p={length:0,every:15,current:1,keyMap:{key:"",length:"total",every:"every",current:"current"}},f={ajaxOptions:{},pageList:[15,30,50],pageOptions:p,parse:function(t){return"string"==typeof t?t:""},events:{},onShow:$.noop,onPage:null,onCheck:$.noop},v=$.extend({},f,n||{}),g=this,m=$();r=e.hasClass(a.container)?e:e.parents("."+a.container),o=r.find("table"),s=r.find("."+a.size),l=r.find("."+a.empty),v.ajaxOptions.url&&(m=r.find("."+a.loading)),c=r.find("."+a.total),d=r.find("."+a.every),h=r.find("."+a.data),u=r.find("."+a.page),this.el={container:r,size:s,table:o,empty:l,loading:m,total:c,every:d,data:h,page:u},this.callback={parse:v.parse,page:v.onPage,show:v.onShow},this.num=$.extend({},p,v.pageOptions),o.delegate(i,"click",function(){if($(this).parents("tr").find(":first-child "+i)[0]===this){var t=o.find("td:first-child "+i),e=!1,a=!1;if($(this).parents("th").length)a=!(e=$(this).prop("checked")),t.prop("checked",e);else{var n=t.filter(":checked").length;e=t.length==n,a=0==n}o.find("th "+i).prop("checked",e),$.fn.propMatch&&o.find(i).propMatch(),t.each(function(){$(this).parents("tr")[$(this).prop("checked")?"addClass":"removeClass"]("selected")}),v.onCheck.call(this,e,a,o)}}),o.on("click",function(t){var e=t.target,a=null;e&&0==/^a|input|label|th$/i.test(e.tagName)&&(a=$(e).parents("tr").find("td:first "+i)).length&&0==a.prop("disabled")&&a.trigger("click")}),$.each(v.events,function(t,e){var i=t.split(":");2==i.length&&$.isFunction(e)&&o.delegate(i[0],i[1],e)});var y=o.attr("id"),b=v.pageOptions.every;y&&window.localStorage&&localStorage[y]&&d.length&&(b=localStorage[y],g.num.every=b),d.html(b),this.pageList=new t(d.parent(),$.map(v.pageList,function(t){return{value:'<span class="'+a.every+'">'+t+"</span>"}}),{width:60,onSelect:function(){var t=$(this).text();window.localStorage&&y&&(localStorage[y]=t),g.num.every!=t&&(g.num.every=t,g.num.current=1,g.ajax())}}),this.ajaxOptions=v.ajaxOptions,""==o.find("tbody").html()?this.ajax():this.page()};return n.prototype.ajax=function(t){t=t||{};var e=this;if(1==e.ajaxing)return this;var i=this.el,n=this.callback,r=this.num,o=i.table.find("tbody"),s=$.extend({dataType:"json"},this.ajaxOptions,t);if(!s.url)return this;var l=t.data||{},c={};$.isFunction(this.ajaxOptions.data)&&(c=this.ajaxOptions.data()||{});var d={},h=r.keyMap;d[h.current]=r.current,d[h.every]=r.every,s.data=$.extend({},d,c,l),r.current=s.data[h.current],r.every=s.data[h.every];var u=s.success,p=s.error,f=s.complete;s.success=function(t){if(t.hasOwnProperty("code")&&0!==t.code||t.hasOwnProperty("error")&&0!==t.error)s.error(l.msg||"返回数据出现异常，请稍后重试");else{var a=n.parse(t);o.html(a||""),$.trim(a)||i.empty.show();var r,c=h.key;((r=c?t.data[c][h.length]:t.data[h.length])||0==r)&&(i.total.html(r),e.num.length=r),i.data.show(),e.page(),i.table.find(".ui-tips").tips(),$.isFunction(u)&&u(t)}},s.error=function(t,e){var n=i.size.find("."+a.error),r="";"string"==typeof t&&(r=t),n.size()?n.show():(n=$('<div class="'+a.error+'">网络异常，数据没有获取成功，您可以稍后重试！</div>'),i.size.append(n)),r&&n.html(r),$.isFunction(p)&&!r&&p(t,e)},s.complete=function(){i.loading.hide(),this.pagination&&this.pagination.el.container.find(".loading").removeClass("loading"),$.isFunction(f)&&f(),e.show(),e.ajaxing=!1};var v=$(window).scrollTop();i.table.offset().top<v?(v=i.container.offset().top,$("html, body").animate({scrollTop:v},"fast",function(){this==document.body&&(e.ajaxing=!0,$.ajax(s))})):(e.ajaxing=!0,$.ajax(s)),i.loading.css("top","0"),"none"==i.loading.css("display")&&i.loading.height(i.size.height()-i.table.find("thead").height());var g=i.loading.height()-$(window).height();return g>0&&i.loading.css("top",-.5*g),i.loading.show(),i.empty.hide(),i.size.find("."+a.error).hide(),i.table.find("tbody").empty(),this.scrollTop=v,this},n.prototype.page=function(t){var i=this,a=i.el,n=i.num;i.pagination?(i.pagination.num=n,i.pagination.show()):i.pagination=new e(a.page,{length:n.length,current:n.current,every:n.every,mode:n.mode||"long",onClick:function(t,e){i.num.current=e,$.isFunction(i.callback.page)?i.callback.page.call(this,t,e):($(this).addClass("loading"),i.ajax())}})},n.prototype.show=function(){this.el.size.unloading(this.el.size.data("animation")),this.el.loading.css("top","0"),$(window).scrollTop(this.scrollTop);var t=this.el.table.find("th input"+i);return t.length&&(t.prop("checked",!1),$.fn.propMatch&&t.propMatch()),$.isFunction(this.callback.show)&&this.callback.show.call(this),this},n});